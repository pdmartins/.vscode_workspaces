---
applyTo: '**'
---
# Copilot Instructions

<loader critical="true">
  <mandate>Este arquivo √© o AGREGADOR que carrega core + project</mandate>
  <mandate>Instru√ß√µes s√£o OBRIGAT√ìRIAS, n√£o sugest√µes</mandate>
  <mandate>O CORE √© AGN√ìSTICO - n√£o conhece skills espec√≠ficos do projeto</mandate>
</loader>

## Clarifica√ß√£o de D√∫vidas

<clarification critical="true">
  <mandate>NUNCA assuma algo que n√£o esteja EXPL√çCITO no pedido do usu√°rio ou nos arquivos de instru√ß√µes</mandate>
  <mandate>Quando houver ambiguidade ou informa√ß√£o faltando, VOC√ä DEVE perguntar ANTES de executar</mandate>
  
  <when-to-ask>
    - Pedido do usu√°rio √© vago ou amb√≠guo
    - M√∫ltiplas interpreta√ß√µes s√£o poss√≠veis
    - Informa√ß√£o cr√≠tica est√° faltando (nome, caminho, formato, etc.)
    - Decis√£o impacta significativamente o resultado
    - N√£o h√° conven√ß√£o estabelecida nos arquivos de instru√ß√µes
  </when-to-ask>
  
  <when-NOT-to-ask>
    - Informa√ß√£o est√° expl√≠cita no pedido
    - Conven√ß√£o est√° documentada nos arquivos de instru√ß√µes
    - √â uma decis√£o trivial sem impacto significativo
    - Contexto do arquivo/projeto torna a resposta √≥bvia
  </when-NOT-to-ask>
  
  <how-to-ask>
    <action>Formular pergunta clara e espec√≠fica</action>
    <action>Oferecer op√ß√µes quando aplic√°vel</action>
    <action>Explicar brevemente por que est√° perguntando</action>
    <output>‚ùì **Preciso de clarifica√ß√£o**: {pergunta}</output>
  </how-to-ask>
</clarification>

## Carregamento

<load-order critical="true">
  <step n="1" goal="Carregar Core">
    <mandate>Ler e aplicar: {workspace}/.github/.copilot-core/initial.md</mandate>
    <includes>
      - workflow-engine.md (motor de execu√ß√£o)
      - skills-system.md (sistema de skills gen√©rico)
      - todo-workflow.md (gest√£o de tarefas)
    </includes>
  </step>
  
  <step n="2" goal="Carregar Project Instructions">
    <mandate>Ler e aplicar: {workspace}/.github/.copilot-project/instructions.md</mandate>
    <note>Este arquivo cont√©m TODAS as regras espec√≠ficas do projeto</note>
    <note>Inclui mapeamento de extens√µes ‚Üí skills</note>
    <note>O core N√ÉO sabe quais skills existem - o project define</note>
  </step>
</load-order>

## Skills do Core

<core-skills>
  O core disponibiliza apenas skills GEN√âRICOS reutiliz√°veis:
  
  | Skill | Arquivo | Prop√≥sito |
  |-------|---------|-----------|
  | memory | `{workspace}/.github/.copilot-core/skills/memory.md` | Gerenciar li√ß√µes aprendidas |
  | context | `{workspace}/.github/.copilot-core/skills/context.md` | Gerenciar estado atual do projeto |
  | create-skill | `{workspace}/.github/.copilot-core/skills/create-skill.md` | Criar novos skills |
  | project-analyzer | `{workspace}/.github/.copilot-core/skills/project-analyzer.md` | Analisar estrutura do projeto |
  | project-setup | `{workspace}/.github/.copilot-core/skills/project-setup.md` | Configurar novo projeto |
</core-skills>

## Skill Loading

<skill-announcement critical="true">
  <mandate>Em TODA resposta, VOC√ä DEVE informar no in√≠cio quais skills est√£o em uso:</mandate>
  
  <format-new>üîß **Skill ativada**: `{nome}` (quando carregar nova skill)</format-new>
  <format-context>üîß **Skills em uso**: `{skill1}`, `{skill2}` (quando j√° no contexto)</format-context>
  
  <examples>
    - Primeira vez: "üîß **Skill ativada**: `bash`"
    - Continua√ß√£o: "üîß **Skills em uso**: `bash`, `sync`"
    - Sem skills: N√£o mostrar nada
  </examples>
</skill-announcement>

<skill-deactivation>
  <trigger>Usu√°rio diz: "desativar skill {nome}" ou "ignorar skill {nome}"</trigger>
  <action>Parar de aplicar regras dessa skill pelo resto da conversa</action>
  <action>Remover da lista de "skills em uso"</action>
  <output>‚èπÔ∏è **Skill desativada**: `{nome}`</output>
  <note>Skills desativadas ainda est√£o no hist√≥rico mas suas regras s√£o IGNORADAS</note>
</skill-deactivation>

## Delega√ß√£o para Project

<project-delegation critical="true">
  <mandate>O CORE n√£o conhece skills espec√≠ficos do projeto</mandate>
  <mandate>Para saber qual skill carregar, VOC√ä DEVE consultar: {workspace}/.github/.copilot-project/instructions.md</mandate>
  
  <workflow id="skill-discovery">
    <step n="1" goal="Identificar tipo de arquivo">
      <action>Detectar extens√£o ou tipo do arquivo em contexto</action>
    </step>
    
    <step n="2" goal="Consultar project">
      <action>Ler: {workspace}/.github/.copilot-project/instructions.md</action>
      <action>Seguir mapeamento extens√£o ‚Üí skill definido l√°</action>
    </step>
    
    <step n="3" goal="Carregar skill">
      <action>Carregar o skill indicado pelo project</action>
      <check if="skill n√£o existe">
        <action>Usar core skill `create-skill`</action>
      </check>
    </step>
  </workflow>
</project-delegation>

## Task Complexity Workflow

<workflow id="task-analysis" trigger="on-user-request" priority="first">
  <step n="1" goal="Avaliar complexidade da tarefa">
    <criteria id="complex-task">
      Uma tarefa √© COMPLEXA quando:
      - Envolve 4+ steps distintos
      - Usu√°rio pede m√∫ltiplas coisas (lista numerada, v√≠rgulas)
      - Envolve criar/modificar m√∫ltiplos arquivos
      - Requer sincroniza√ß√£o cross-platform + english-version
      - Envolve criar nova pasta ou novo tipo de script
    </criteria>
    
    <check if="tarefa √© COMPLEXA conforme crit√©rios acima">
      <action>Criar TODO list com manage_todo_list</action>
      <action>Listar TODOS os steps identificados</action>
      <action>Marcar primeiro step como in-progress</action>
      <output>üìã Lista de tarefas criada</output>
    </check>
    
    <check if="tarefa √© SIMPLES">
      <action>N√ÉO criar TODO list (evitar overhead)</action>
      <action>Executar diretamente</action>
    </check>
  </step>
</workflow>

<workflow id="task-completion" trigger="after-each-step">
  <step n="1" goal="Atualizar progresso">
    <check if="TODO list existe">
      <action>Marcar step atual como completed</action>
      <action>Marcar pr√≥ximo step como in-progress (se houver)</action>
    </check>
  </step>
  
  <step n="2" goal="Revisar e ajustar" trigger="ap√≥s-completar-step">
    <check if="novo step descoberto durante execu√ß√£o">
      <action>Adicionar novo step √† lista</action>
      <action>Reordenar se necess√°rio</action>
    </check>
    
    <check if="step atual revelou sub-tarefas">
      <action>Dividir em steps menores</action>
      <action>Atualizar lista</action>
    </check>
    
    <check if="step n√£o √© mais necess√°rio">
      <action>Remover da lista</action>
    </check>
  </step>
  
  <step n="3" goal="Finalizar">
    <check if="todos os steps completed">
      <action>Verificar se TODO list est√° 100% conclu√≠da</action>
      <output>‚úÖ Todas as tarefas conclu√≠das</output>
    </check>
  </step>
</workflow>

## File Detection Workflow

<workflow id="file-detection" trigger="on-file-context">
  <step n="1" goal="Detectar tipo de arquivo">
    <action>Identificar extens√£o ou tipo do arquivo em contexto</action>
  </step>
  
  <step n="2" goal="Consultar instru√ß√µes do project">
    <action>Ler: {workspace}/.github/.copilot-project/instructions.md</action>
    <action>Localizar se√ß√£o de mapeamento extens√£o ‚Üí skill</action>
    <action>Identificar qual skill carregar para o tipo de arquivo</action>
  </step>

  <step n="3" goal="Carregar skill apropriada">
    <check if="skill encontrada no project">
      <action>Ler COMPLETAMENTE o arquivo da skill indicada</action>
      <action>Aplicar todos os padr√µes e templates do skill</action>
    </check>
    
    <check if="skill N√ÉO encontrada">
      <action>Usar core skill `create-skill` para criar nova skill</action>
    </check>
  </step>
  
  <step n="4" goal="P√≥s-modifica√ß√£o">
    <action>Consultar project instructions para a√ß√µes p√≥s-modifica√ß√£o</action>
    <action>Executar workflows indicados pelo project</action>
  </step>
</workflow>

