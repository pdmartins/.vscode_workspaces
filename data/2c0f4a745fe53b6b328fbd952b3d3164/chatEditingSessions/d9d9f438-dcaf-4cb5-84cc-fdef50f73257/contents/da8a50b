# Memory Skill

<skill id="memory" context="gerenciar mem√≥ria persistente do agente">

## Prop√≥sito

Gerenciar a **mem√≥ria persistente** do Copilot para o workspace.
Esta skill permite consultar e atualizar informa√ß√µes que persistem entre sess√µes.

## Quando Usar

<triggers>
  - Consultar contexto do projeto antes de tarefa complexa
  - Registrar decis√£o arquitetural importante
  - Registrar li√ß√£o aprendida (erro corrigido, padr√£o descoberto)
  - Atualizar contexto quando projeto muda significativamente
  - Usu√°rio pede para "lembrar" algo
  - Usu√°rio pergunta sobre decis√µes passadas
</triggers>

## Estrutura da Mem√≥ria

<memory-structure>
```
{workspace}/.github/.copilot-project/memory/
‚îî‚îÄ‚îÄ lessons-learned.md    # Li√ß√µes e decis√µes importantes
```

**Nota**: Os dados ficam em `.github/.copilot-project/` (espec√≠fico do projeto), 
enquanto esta skill fica em `.github/` (core reutiliz√°vel).

**Contexto** (estado atual) fica separado em `.github/.copilot-project/context/` - ver skill `context.md`.
</memory-structure>

## Workflow: Consultar Mem√≥ria

<workflow id="consult-memory" trigger="in√≠cio de tarefa complexa">
  <step n="1" goal="Ler li√ß√µes aprendidas">
    <action>Ler: {workspace}/.github/.copilot-project/memory/lessons-learned.md</action>
    <action>Identificar li√ß√µes relacionadas √† tarefa atual</action>
    <action>Aplicar aprendizados para evitar erros passados</action>
    
    <output>
      üìö **Li√ß√µes relevantes encontradas**:
      {lista de li√ß√µes aplic√°veis}
    </output>
  </step>

  <step n="2" goal="Aplicar conhecimento">
    <action>Usar informa√ß√µes da mem√≥ria para guiar a tarefa</action>
    <action>Evitar repetir erros documentados</action>
    <action>Seguir padr√µes estabelecidos</action>
  </step>
</workflow>

## Workflow: Registrar Li√ß√£o

<workflow id="register-lesson" trigger="ap√≥s decis√£o importante ou corre√ß√£o de erro">
  <step n="1" goal="Avaliar se deve registrar">
    <criteria id="should-register">
      REGISTRAR quando:
      - Decis√£o arquitetural que impacta o projeto
      - Erro corrigido com aprendizado √∫til
      - Novo padr√£o estabelecido
      - Descoberta importante sobre o projeto
      
      N√ÉO REGISTRAR quando:
      - Mudan√ßa trivial de c√≥digo
      - Decis√£o tempor√°ria ou experimental
      - Informa√ß√£o j√° documentada em README
      - Detalhes de implementa√ß√£o espec√≠ficos
    </criteria>
    
    <check if="crit√©rio de registro atendido">
      <action>Prosseguir com registro</action>
    </check>
    
    <check if="n√£o atende crit√©rio">
      <action>N√£o registrar - evitar polui√ß√£o da mem√≥ria</action>
      <halt reason="N√£o atende crit√©rio de registro"/>
    </check>
  </step>

  <step n="2" goal="Formatar li√ß√£o">
    <template>
```xml
<lesson date="YYYY-MM-DD" category="categoria">
  <context>Contexto do problema ou situa√ß√£o</context>
  <decision>Decis√£o tomada e por qu√™</decision>
  <outcome>Resultado e impacto</outcome>
</lesson>
```
    </template>
    
    <categories>
      | Categoria | Quando Usar |
      |-----------|-------------|
      | arquitetura | Estrutura do projeto, organiza√ß√£o |
      | padr√µes | Conven√ß√µes de c√≥digo, nomenclatura |
      | tooling | Ferramentas, depend√™ncias, configs |
      | workflow | Processos, automa√ß√µes |
      | debug | Problemas resolvidos, armadilhas |
      | performance | Otimiza√ß√µes, melhorias |
      | seguran√ßa | Pr√°ticas de seguran√ßa |
    </categories>
  </step>

  <step n="3" goal="Adicionar ao arquivo">
    <action>Ler: {workspace}/.github/.copilot-project/memory/lessons-learned.md</action>
    <action>Adicionar nova lesson na se√ß√£o "## Registro"</action>
    <action>Manter ordem cronol√≥gica (mais recente primeiro)</action>
    
    <output>üìù Li√ß√£o registrada em lessons-learned.md</output>
  </step>
</workflow>

## Workflow: Criar Mem√≥ria (Novo Projeto)

<workflow id="init-memory" trigger="projeto sem estrutura de mem√≥ria">
  <step n="1" goal="Verificar se mem√≥ria existe">
    <check if="pasta memory/ N√ÉO existe">
      <action>Criar: {workspace}/.github/.copilot-project/memory/</action>
    </check>
  </step>

  <step n="2" goal="Criar lessons-learned.md">
    <check if="lessons-learned.md N√ÉO existe">
      <action>Criar com template base</action>
      
      <template>
```markdown
# Lessons Learned

Registro de aprendizados e decis√µes importantes do projeto.

---

## Estrutura

<lesson date="YYYY-MM-DD" category="categoria">
  <context>Contexto do problema</context>
  <decision>Decis√£o tomada</decision>
  <outcome>Resultado/impacto</outcome>
</lesson>

---

## Registro

<!-- Adicionar li√ß√µes aqui, mais recente primeiro -->

---

## Categorias

| Categoria | Descri√ß√£o |
|-----------|-----------|
| arquitetura | Decis√µes estruturais |
| padr√µes | Conven√ß√µes de c√≥digo |
| tooling | Ferramentas e automa√ß√£o |
| workflow | Processos |
| debug | Corre√ß√µes importantes |
```
      </template>
    </check>
  </step>

  <step n="3" goal="Confirmar">
    <output>
      üß† **Mem√≥ria inicializada**
      - lessons-learned.md criado
    </output>
  </step>
</workflow>

## Comandos do Usu√°rio

<user-commands>
  | Comando | A√ß√£o |
  |---------|------|
  | "lembrar {algo}" | Registrar como li√ß√£o |
  | "o que voc√™ sabe sobre {x}?" | Consultar mem√≥ria |
  | "quais decis√µes foram tomadas?" | Listar li√ß√µes de arquitetura |
  | "consultar mem√≥ria" | Workflow consult-memory |
  | "registrar li√ß√£o" | Workflow register-lesson |
</user-commands>

## Integra√ß√£o com Outros Skills

<integration>
  <auto-trigger skill="memory" when="tarefa-complexa-iniciada">
    Consultar mem√≥ria antes de come√ßar
  </auto-trigger>
  
  <auto-trigger skill="memory" when="decis√£o-arquitetural">
    Registrar decis√£o como li√ß√£o
  </auto-trigger>
  
  <auto-trigger skill="memory" when="erro-corrigido">
    Avaliar se deve registrar li√ß√£o
  </auto-trigger>
</integration>

## Output Padr√£o

<output-formats>
  <format id="lesson-registered">
    üìù **Li√ß√£o registrada**
    - Categoria: `{categoria}`
    - Contexto: {resumo}
  </format>
  
  <format id="memory-consulted">
    üìö **Mem√≥ria consultada**
    - Li√ß√µes relevantes: {n}
  </format>
</output-formats>

</skill>

