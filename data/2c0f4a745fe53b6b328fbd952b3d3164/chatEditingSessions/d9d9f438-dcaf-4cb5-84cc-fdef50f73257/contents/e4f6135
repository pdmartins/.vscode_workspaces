# Project Setup Skill

<skill id="project-setup" context="configurar submodules e estrutura de prompts">

## Prop√≥sito

Gerenciar a configura√ß√£o de submodules do copilot e a estrutura de prompts em projetos.

## Arquitetura de Repos

<architecture>
  | Repo | Estrat√©gia | Descri√ß√£o |
  |------|------------|-----------|
  | `.github/` | Repo √∫nico, branch main | Core reutiliz√°vel (este repo) |
  | `.github-project/` | Repo √∫nico, **branch por projeto** | Prompts espec√≠ficos organizados por branches |
  
  <branch-strategy>
    - Cada projeto usa uma branch com nome do projeto (ex: `meu-projeto`, `api-backend`)
    - Permite consolidar todos os prompts espec√≠ficos em um √∫nico reposit√≥rio
    - Facilita manuten√ß√£o e versionamento centralizado
  </branch-strategy>
</architecture>

## Quando Usar

<triggers>
  - Inicializar submodules em novo projeto
  - Atualizar submodules existentes
  - Configurar estrutura de prompts
  - Vincular branch espec√≠fica do project
</triggers>

## Workflow: Inicializar Projeto

<workflow id="init-project">
  <step n="1" goal="Verificar pr√©-requisitos">
    <action>Verificar se .github/ existe</action>
    <action>Verificar se git est√° inicializado</action>
    
    <check if=".github/ e .github-project/ j√° existem">
      <output>‚ö†Ô∏è Estrutura j√° existe. Use workflow de atualiza√ß√£o.</output>
      <halt reason="Estrutura j√° configurada"/>
    </check>
  </step>

  <step n="2" goal="Criar estrutura base">
    <action>Criar pasta .github-project/</action>
    <action>Criar pasta .github-project/memory/</action>
    <action>Criar .github-project/memory/lessons-learned.md</action>
    <action>Criar .github-project/memory/project-context.md</action>
  </step>

  <step n="3" goal="Clonar reposit√≥rio core">
    <command>
      git clone {repo-core} .github
    </command>
    <note>Core vai direto para .github/ (cont√©m instructions/)</note>
    <output>üì¶ Core clonado</output>
  </step>

  <step n="4" goal="Clonar reposit√≥rio project (branch espec√≠fica)">
    <action>Detectar nome do projeto atual (pasta do workspace)</action>
    <ask>
      Branch do .github-project para este projeto?
      Sugest√£o: `{nome-do-projeto}` (baseado no nome da pasta)
      [Enter para confirmar ou digite outro nome]
    </ask>
    
    <check if="branch j√° existe no remote">
      <command>
        git clone -b {branch-projeto} {repo-project} .github-project
      </command>
      <output>üì¶ Project clonado (branch: {branch-projeto})</output>
    </check>
    
    <check if="branch N√ÉO existe (novo projeto)">
      <command>
        git clone {repo-project} .github-project
        cd .github-project
        git checkout -b {branch-projeto}
      </command>
      <action>Criar estrutura inicial na nova branch</action>
      <action>Executar project-analyzer para configurar</action>
      <output>üì¶ Nova branch criada: {branch-projeto}</output>
    </check>
  </step>

  <step n="5" goal="Criar default.instructions.md">
    <action>Criar .github/instructions/default.instructions.md</action>
    <action>Configurar para carregar core e project</action>
    
    <output>‚úÖ Projeto inicializado com sucesso (branch: {branch-projeto})</output>
  </step>
</workflow>

## Workflow: Atualizar Submodules

<workflow id="update-repos">
  <step n="1" goal="Atualizar core">
    <command>
      cd .github && git pull origin main
    </command>
    <output>üîÑ Core atualizado</output>
  </step>

  <step n="2" goal="Atualizar project (branch atual)">
    <action>Verificar branch atual do .github-project/</action>
    <command>
      cd .github-project && git pull origin $(git branch --show-current)
    </command>
    <output>üîÑ Project atualizado (branch: {branch-atual})</output>
  </step>

  <step n="3" goal="Verificar mudan√ßas">
    <note>.github/ e .github-project/ est√£o no .gitignore do repo principal</note>
    <output>‚úÖ Repos atualizados</output>
  </step>
</workflow>

## Workflow: Trocar Branch do Project

<workflow id="switch-project-branch">
  <step n="1" goal="Verificar branch atual">
    <command>
      cd .github-project && git branch --show-current
    </command>
    <output>Branch atual: {branch-atual}</output>
  </step>

  <step n="2" goal="Listar branches dispon√≠veis">
    <command>
      cd .github-project && git fetch && git branch -r
    </command>
    <ask>Qual branch deseja usar?</ask>
  </step>

  <step n="3" goal="Trocar branch">
    <command>
      cd .github-project && git checkout {nova-branch}
    </command>
    <output>‚úÖ Trocado para branch: {nova-branch}</output>
  </step>
</workflow>

## Workflow: Criar Project Local

<workflow id="create-local-project">
  <step n="1" goal="Criar estrutura">
    <action>Criar .github-project/initial.md</action>
    <action>Criar .github-project/skills/</action>
  </step>

  <step n="2" goal="Executar analyzer">
    <load>project-analyzer.md</load>
    <action>Seguir workflow de an√°lise</action>
  </step>
</workflow>

## Commands Reference

<commands>
  | Comando | Prop√≥sito |
  |---------|-----------|
  | `git clone -b {branch} {url} {path}` | Clonar repo em branch espec√≠fica |
  | `git checkout -b {branch}` | Criar e trocar para nova branch |
  | `git branch --show-current` | Ver branch atual |
  | `git branch -r` | Listar branches remotas |
  | `git submodule update --init --recursive` | Inicializar submodules ap√≥s clone |
  | `git submodule update --remote` | Atualizar para √∫ltima vers√£o |
</commands>

</skill>
