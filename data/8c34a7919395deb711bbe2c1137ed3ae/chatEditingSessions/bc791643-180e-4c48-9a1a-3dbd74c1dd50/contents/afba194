# ‚òÅÔ∏è Azure Scripts

Scripts para automa√ß√£o e gerenciamento de recursos no Microsoft Azure.

## üìã Scripts Dispon√≠veis

### `export-azure-resources.ps1`

Exporta um Azure Resource Group como ARM Template para backup ou migra√ß√£o.

**Funcionalidades:**
- üîê Conecta em um tenant Azure
- üì¶ Exporta todos os recursos de um Resource Group
- üíæ Salva como ARM Template localmente
- ‚úÖ Verifica Execution Policy automaticamente

**Par√¢metros:**
| Par√¢metro | Obrigat√≥rio | Descri√ß√£o |
|-----------|-------------|-----------|
| `-TenantId` | N√£o* | ID do tenant Azure |
| `-SubscriptionId` | N√£o* | ID da subscription Azure |
| `-ResourceGroupName` | N√£o* | Nome do Resource Group a exportar |
| `-ExportPath` | N√£o | Caminho para salvar (padr√£o: `.\azure-migration`) |
| `-SkipLogin` | N√£o | Pula login se j√° autenticado |

*Se n√£o fornecido, ser√° solicitado interativamente.

**Exemplo de uso:**
```powershell
# Com par√¢metros
.\export-azure-resources.ps1 -TenantId "xxx" -SubscriptionId "yyy" -ResourceGroupName "my-rg"

# Interativo (ser√° solicitado os dados)
.\export-azure-resources.ps1
```

**Requisitos:**
- Azure CLI instalado
- PowerShell 5.1+ ou PowerShell Core

---

### `run-execution-policy.bat`

Script auxiliar para configurar a Execution Policy do PowerShell.

**Uso:**
```batch
run-execution-policy.bat
```

Configura a pol√≠tica de execu√ß√£o para `RemoteSigned` no escopo do usu√°rio atual.

---

### `clone-devops-repos.ps1` / `clone-devops-repos.sh`

Clona todos os reposit√≥rios de um projeto no Azure DevOps.

**Funcionalidades:**
- üì¶ Lista todos os reposit√≥rios de um projeto
- üîÑ Clona novos reposit√≥rios automaticamente
- üîÑ Atualiza reposit√≥rios j√° existentes (git pull)
- üìÅ Suporta arquivo de configura√ß√£o JSON
- ‚úÖ Idempotente (pode executar v√°rias vezes)

**Par√¢metros:**
| Par√¢metro | Descri√ß√£o |
|-----------|-----------|
| `-OrganizationUrl` / `-o` | URL da organiza√ß√£o Azure DevOps |
| `-Project` / `-p` | Nome do projeto |
| `-Username` / `-u` | Nome de usu√°rio (e-mail) |
| `-Pat` / `-t` | Personal Access Token |
| `-ClonePath` / `-d` | Pasta de destino (padr√£o: `./repos`) |
| `-ConfigFile` / `-c` | Arquivo de configura√ß√£o JSON |

**Arquivo de configura√ß√£o (`devops-config.json`):**
```json
{
  "organization_url": "https://dev.azure.com/sua-org",
  "project": "nome-do-projeto",
  "username": "seu-email@exemplo.com",
  "pat": "seu-personal-access-token",
  "clone_path": "./repos"
}
```

> ‚ö†Ô∏è **Seguran√ßa:** Copie `devops-config.example.json` para `devops-config.json` e preencha seus dados. O arquivo `devops-config.json` est√° no `.gitignore`.

**Exemplo de uso:**
```powershell
# Windows - Com arquivo de configura√ß√£o na mesma pasta
.\clone-devops-repos.ps1

# Windows - Com par√¢metros
.\clone-devops-repos.ps1 -OrganizationUrl "https://dev.azure.com/minha-org" -Project "meu-projeto" -Username "email@exemplo.com" -Pat "meu-token"
```

```bash
# Linux - Com arquivo de configura√ß√£o na mesma pasta
./clone-devops-repos.sh

# Linux - Com par√¢metros
./clone-devops-repos.sh -o "https://dev.azure.com/minha-org" -p "meu-projeto" -u "email@exemplo.com" -t "meu-token"
```

**Requisitos:**
- Git instalado
- Personal Access Token (PAT) do Azure DevOps com permiss√£o de leitura em reposit√≥rios
- Linux: `curl` e `jq` instalados

**Como obter o PAT:**
1. Acesse Azure DevOps ‚Üí User Settings ‚Üí Personal Access Tokens
2. Clique em "New Token"
3. Selecione escopo: `Code (Read)` no m√≠nimo
4. Copie o token gerado
