# Memory Skill

<skill id="memory" context="gerenciar mem√≥ria persistente do agente">

## Prop√≥sito

Gerenciar a **mem√≥ria persistente** do Copilot para o workspace.
Esta skill permite consultar e atualizar informa√ß√µes que persistem entre sess√µes.

## Quando Usar

<triggers>
  - Consultar contexto do projeto antes de tarefa complexa
  - Registrar decis√£o arquitetural importante
  - Registrar li√ß√£o aprendida (erro corrigido, padr√£o descoberto)
  - Atualizar contexto quando projeto muda significativamente
  - Usu√°rio pede para "lembrar" algo
  - Usu√°rio pergunta sobre decis√µes passadas
</triggers>

## Estrutura da Mem√≥ria

<memory-structure>
```
{workspace}/.github-project/memory/
‚îú‚îÄ‚îÄ lessons-learned.md    # Li√ß√µes e decis√µes importantes
‚îî‚îÄ‚îÄ project-context.md    # Contexto atual do projeto
```

**Nota**: Os dados ficam em `.github-project/` (espec√≠fico do projeto), 
enquanto esta skill fica em `.github/` (core reutiliz√°vel).
</memory-structure>

## Workflow: Consultar Mem√≥ria

<workflow id="consult-memory" trigger="in√≠cio de tarefa complexa">
  <step n="1" goal="Ler li√ß√µes aprendidas">
    <action>Ler: {workspace}/.github-project/memory/lessons-learned.md</action>
    <action>Identificar li√ß√µes relacionadas √† tarefa atual</action>
    <action>Aplicar aprendizados para evitar erros passados</action>
    
    <output>
      üìö **Li√ß√µes relevantes encontradas**:
      {lista de li√ß√µes aplic√°veis}
    </output>
  </step>

  <step n="2" goal="Ler contexto do projeto">
    <action>Ler: {workspace}/.github-project/memory/project-context.md</action>
    <action>Entender objetivo, stack, restri√ß√µes do projeto</action>
    <action>Considerar decis√µes ativas nas escolhas</action>
  </step>

  <step n="3" goal="Aplicar conhecimento">
    <action>Usar informa√ß√µes da mem√≥ria para guiar a tarefa</action>
    <action>Evitar repetir erros documentados</action>
    <action>Seguir padr√µes estabelecidos</action>
  </step>
</workflow>

## Workflow: Registrar Li√ß√£o

<workflow id="register-lesson" trigger="ap√≥s decis√£o importante ou corre√ß√£o de erro">
  <step n="1" goal="Avaliar se deve registrar">
    <criteria id="should-register">
      REGISTRAR quando:
      - Decis√£o arquitetural que impacta o projeto
      - Erro corrigido com aprendizado √∫til
      - Novo padr√£o estabelecido
      - Descoberta importante sobre o projeto
      
      N√ÉO REGISTRAR quando:
      - Mudan√ßa trivial de c√≥digo
      - Decis√£o tempor√°ria ou experimental
      - Informa√ß√£o j√° documentada em README
      - Detalhes de implementa√ß√£o espec√≠ficos
    </criteria>
    
    <check if="crit√©rio de registro atendido">
      <action>Prosseguir com registro</action>
    </check>
    
    <check if="n√£o atende crit√©rio">
      <action>N√£o registrar - evitar polui√ß√£o da mem√≥ria</action>
      <halt reason="N√£o atende crit√©rio de registro"/>
    </check>
  </step>

  <step n="2" goal="Formatar li√ß√£o">
    <template>
```xml
<lesson date="YYYY-MM-DD" category="categoria">
  <context>Contexto do problema ou situa√ß√£o</context>
  <decision>Decis√£o tomada e por qu√™</decision>
  <outcome>Resultado e impacto</outcome>
</lesson>
```
    </template>
    
    <categories>
      | Categoria | Quando Usar |
      |-----------|-------------|
      | arquitetura | Estrutura do projeto, organiza√ß√£o |
      | padr√µes | Conven√ß√µes de c√≥digo, nomenclatura |
      | tooling | Ferramentas, depend√™ncias, configs |
      | workflow | Processos, automa√ß√µes |
      | debug | Problemas resolvidos, armadilhas |
      | performance | Otimiza√ß√µes, melhorias |
      | seguran√ßa | Pr√°ticas de seguran√ßa |
    </categories>
  </step>

  <step n="3" goal="Adicionar ao arquivo">
    <action>Ler: {workspace}/.github-project/memory/lessons-learned.md</action>
    <action>Adicionar nova lesson na se√ß√£o "## Registro"</action>
    <action>Manter ordem cronol√≥gica (mais recente primeiro)</action>
    
    <output>üìù Li√ß√£o registrada em lessons-learned.md</output>
  </step>
</workflow>

## Workflow: Atualizar Contexto

<workflow id="update-context" trigger="mudan√ßa significativa no projeto">
  <step n="1" goal="Identificar o que mudou">
    <triggers>
      - Novo objetivo principal do projeto
      - Mudan√ßa de stack tecnol√≥gico
      - Novas restri√ß√µes ou requisitos
      - Integra√ß√£o com novos sistemas
      - Decis√£o arquitetural importante
    </triggers>
  </step>

  <step n="2" goal="Atualizar project-context.md">
    <action>Ler: {workspace}/.github-project/memory/project-context.md</action>
    <action>Identificar se√ß√£o a atualizar</action>
    <action>Fazer a atualiza√ß√£o mantendo estrutura</action>
    <action>Atualizar "√öltima Atualiza√ß√£o" com data e motivo</action>
    
    <output>üîÑ Contexto atualizado em project-context.md</output>
  </step>
</workflow>

## Workflow: Criar Mem√≥ria (Novo Projeto)

<workflow id="init-memory" trigger="projeto sem estrutura de mem√≥ria">
  <step n="1" goal="Verificar se mem√≥ria existe">
    <check if="pasta memory/ N√ÉO existe">
      <action>Criar: {workspace}/.github-project/memory/</action>
    </check>
  </step>

  <step n="2" goal="Criar lessons-learned.md">
    <check if="lessons-learned.md N√ÉO existe">
      <action>Criar com template base</action>
      
      <template>
```markdown
# Lessons Learned

Registro de aprendizados e decis√µes importantes do projeto.

---

## Estrutura

<lesson date="YYYY-MM-DD" category="categoria">
  <context>Contexto do problema</context>
  <decision>Decis√£o tomada</decision>
  <outcome>Resultado/impacto</outcome>
</lesson>

---

## Registro

<!-- Adicionar li√ß√µes aqui, mais recente primeiro -->

---

## Categorias

| Categoria | Descri√ß√£o |
|-----------|-----------|
| arquitetura | Decis√µes estruturais |
| padr√µes | Conven√ß√µes de c√≥digo |
| tooling | Ferramentas e automa√ß√£o |
| workflow | Processos |
| debug | Corre√ß√µes importantes |
```
      </template>
    </check>
  </step>

  <step n="3" goal="Criar project-context.md">
    <check if="project-context.md N√ÉO existe">
      <action>Criar com template base</action>
      <action>Preencher com informa√ß√µes do projeto</action>
      
      <template>
```markdown
# Project Context

Contexto atual do projeto para refer√™ncia do Copilot.

---

## Objetivo

{descri√ß√£o do objetivo principal}

## Stack

| Componente | Tecnologia |
|------------|------------|
| {tipo} | {tecnologia} |

## Restri√ß√µes

<constraints>
  - {restri√ß√£o 1}
  - {restri√ß√£o 2}
</constraints>

## Decis√µes Ativas

<active-decisions>
  {decis√µes importantes em vigor}
</active-decisions>

## √öltima Atualiza√ß√£o

**Data**: {data}
**Motivo**: Cria√ß√£o inicial
```
      </template>
    </check>
  </step>

  <step n="4" goal="Confirmar">
    <output>
      üß† **Mem√≥ria inicializada**
      - lessons-learned.md criado
      - project-context.md criado
    </output>
  </step>
</workflow>

## Comandos do Usu√°rio

<user-commands>
  | Comando | A√ß√£o |
  |---------|------|
  | "lembrar {algo}" | Registrar como li√ß√£o ou contexto |
  | "o que voc√™ sabe sobre {x}?" | Consultar mem√≥ria |
  | "quais decis√µes foram tomadas?" | Listar decis√µes ativas |
  | "atualizar contexto" | Workflow update-context |
  | "consultar mem√≥ria" | Workflow consult-memory |
</user-commands>

## Integra√ß√£o com Outros Skills

<integration>
  <auto-trigger skill="memory" when="tarefa-complexa-iniciada">
    Consultar mem√≥ria antes de come√ßar
  </auto-trigger>
  
  <auto-trigger skill="memory" when="decis√£o-arquitetural">
    Registrar decis√£o como li√ß√£o
  </auto-trigger>
  
  <auto-trigger skill="memory" when="erro-corrigido">
    Avaliar se deve registrar li√ß√£o
  </auto-trigger>
</integration>

## Output Padr√£o

<output-formats>
  <format id="lesson-registered">
    üìù **Li√ß√£o registrada**
    - Categoria: `{categoria}`
    - Contexto: {resumo}
  </format>
  
  <format id="context-updated">
    üîÑ **Contexto atualizado**
    - Se√ß√£o: {se√ß√£o}
    - Motivo: {motivo}
  </format>
  
  <format id="memory-consulted">
    üìö **Mem√≥ria consultada**
    - Li√ß√µes relevantes: {n}
    - Contexto carregado: ‚úÖ
  </format>
</output-formats>

</skill>
