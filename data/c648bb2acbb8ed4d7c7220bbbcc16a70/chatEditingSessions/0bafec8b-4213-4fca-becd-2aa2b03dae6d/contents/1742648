---
name: project-context-query
description: Consulta o contexto atual do projeto - stack tecnol√≥gico, restri√ß√µes, integra√ß√µes e estado. Prioriza busca sem√¢ntica via MCP memory-service (se dispon√≠vel) para localizar se√ß√µes espec√≠ficas, com fallback para leitura direta do .md. Triggers: "qual √© o contexto", "que tecnologias usamos", antes de codificar, verificar restri√ß√µes.
metadata:
  author: copilot-core
  version: "2.0"
  category: project
  delegable: full
---

# Project Context Query

Consulta o contexto atual do projeto para guiar implementa√ß√µes. Prioriza MCP para busca sem√¢ntica de se√ß√µes espec√≠ficas.

## Quando Usar

- In√≠cio de sess√£o ou tarefa complexa
- Verificar stack/tecnologias antes de implementar
- Confirmar restri√ß√µes antes de codificar
- Usu√°rio pergunta "qual √© o contexto do projeto?"

## Estrat√©gia de Busca

```
1. MCP memory-service dispon√≠vel?
   ‚îú‚îÄ‚îÄ SIM ‚Üí Busca sem√¢ntica por se√ß√£o espec√≠fica (stack, restri√ß√µes, etc.)
   ‚îÇ         Retorna se√ß√µes relevantes sem carregar o .md inteiro
   ‚îî‚îÄ‚îÄ N√ÉO ‚Üí Fallback: leitura direta do project.md completo
```

## Workflow

### 1. Tentar busca via MCP (preferencial)

Se MCP memory-service estiver configurado:

```
mcp_memory_search_nodes({
  query: "{termos: stack, restri√ß√µes, integra√ß√µes, etc.}"
})
```

Filtrar resultados por `entityType: "context"` e apresentar se√ß√µes relevantes.

**Se MCP n√£o dispon√≠vel ou retornar vazio** ‚Üí passar para passo 2.

### 2. Fallback ‚Äî Leitura direta do .md

Ler: `{workspace}/.copilot-project/context/project.md`

**Se arquivo n√£o existe:**
‚Üí Criar automaticamente a estrutura de contexto (ver se√ß√£o "Auto-Init" abaixo)
‚Üí Coletar informa√ß√µes do usu√°rio ou inferir do c√≥digo para preencher
‚Üí Depois prosseguir com a consulta

### 3. Extrair informa√ß√µes relevantes

Identificar se√ß√µes:
- **Objetivo**: O que o projeto faz
- **Stack**: Tecnologias em uso
- **Restri√ß√µes**: O que N√ÉO pode fazer
- **Integra√ß√µes**: Sistemas conectados
- **Estado**: Fase atual do projeto

### 4. Aplicar restri√ß√µes

- Identificar restri√ß√µes aplic√°veis √† tarefa
- Validar que a√ß√µes planejadas n√£o violam restri√ß√µes

**Se a√ß√£o viola restri√ß√£o:**
‚Üí **PARAR** e informar usu√°rio
‚Üí Sugerir alternativa dentro das restri√ß√µes

### 5. Confirmar stack

- Usar APENAS tecnologias listadas no contexto
- Se precisar de tecnologia n√£o listada, perguntar ao usu√°rio

### 6. Apresentar resumo

**Output**:
```
üìã **Contexto carregado**
- Stack: {tecnologias principais}
- Restri√ß√µes ativas: {n√∫mero}
- Estado: {fase do projeto}
```

## Se√ß√µes do Contexto

| Se√ß√£o | Conte√∫do |
|-------|----------|
| Objetivo | Descri√ß√£o do projeto |
| Stack | Linguagens, frameworks, ferramentas |
| Restri√ß√µes | Limita√ß√µes t√©cnicas ou de neg√≥cio |
| Integra√ß√µes | APIs, servi√ßos externos |
| Estado | Fase atual (MVP, produ√ß√£o, etc) |

## Auto-Init

Quando `context/` ou `project.md` n√£o existir, criar automaticamente:

1. Criar diret√≥rio: `{workspace}/.copilot-project/context/`
2. Coletar informa√ß√µes do projeto (inferir do c√≥digo ou perguntar ao usu√°rio)
3. Criar `project.md` com template:

```markdown
# Project Context

Estado atual do projeto para refer√™ncia do Copilot.

---

## Objetivo

{descri√ß√£o do objetivo principal}

## Stack

| Componente | Tecnologia |
|------------|------------|
| Linguagem | {linguagem} |
| Framework | {framework} |
| Database | {database} |
| Infra | {infra} |

## Restri√ß√µes

- {restri√ß√£o 1}

## Integra√ß√µes

| Sistema | Prop√≥sito | Status |
|---------|-----------|--------|

## Estado Atual

**Fase**: {MVP/Beta/Produ√ß√£o/Manuten√ß√£o}
**Status**: {descri√ß√£o}

## √öltima Atualiza√ß√£o

**Data**: {YYYY-MM-DD}
**Motivo**: Cria√ß√£o inicial
```

4. Informar: `‚úÖ Contexto inicializado automaticamente`
