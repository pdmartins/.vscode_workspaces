# Project Context (DEPRECATED)

> **Este arquivo foi substituÃ­do pela estrutura de pastas com catÃ¡logo.**
> Use `context/index.md` como ponto de entrada.
> Cada subtipo de contexto tem sua prÃ³pria pasta: `architecture/`, `business-rules/`, `code-map/`, `conventions/`, `infrastructure/`, `team-process/`.

## Repos

| Repo | URL | PropÃ³sito |
|------|-----|-----------|
| `.copilot-core` | `https://github.com/pdmartins/.copilot-core.git` | Skills genÃ©ricos, instruÃ§Ãµes globais, templates |
| `.copilot-project` | `https://github.com/pdmartins/.copilot-project.git` | Contexto, memÃ³ria e skills especÃ­ficos por projeto (branch por projeto) |

## Stack

| Componente | Tecnologia |
|------------|------------|
| Formato | Markdown (Agent Skills pattern) |
| Versionamento | Git (submodules ou clones para distribuiÃ§Ã£o) |
| PadrÃ£o | [Agent Skills](https://agentskills.io) |
| Commit | Conventional Commits |
| Linting | markdownlint (via extensÃ£o VS Code) |

## Arquitetura

**Workspace de desenvolvimento** com dois repos lado a lado, seguindo o padrÃ£o standard de projetos consumidores:

```
copilot/                          # Pasta raiz do workspace
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ instructions/
â”‚       â”œâ”€â”€ agent-skills-core.instructions.md      â†’ symlink â†’ ../../.copilot-core/instructions/agent-skills-core.instructions.md
â”‚       â””â”€â”€ agent-skills-project.instructions.md   â†’ symlink â†’ ../../.copilot-project/instructions/agent-skills-project.instructions.md
â”‚
â”œâ”€â”€ .copilot-core/                # Repo principal (branch main)
â”‚   â”œâ”€â”€ .source-control/
â”‚   â”‚   â””â”€â”€ commit-prompt.md
â”‚   â”œâ”€â”€ instructions/
â”‚   â”‚   â””â”€â”€ agent-skills-core.instructions.md
â”‚   â”œâ”€â”€ skills/                   # Skills organizados por tipo
â”‚   â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ code/
â”‚   â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â”œâ”€â”€ infra/
â”‚   â”‚   â”œâ”€â”€ project/
â”‚   â”‚   â””â”€â”€ skill/
â”‚   â”‚       â””â”€â”€ {skill-name}/SKILL.md
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ workspace.instructions.md
â”‚   â””â”€â”€ QUICK-START.md
â”‚
â”œâ”€â”€ .copilot-project/             # Repo auxiliar â€” branch: _pm/copilot-core
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â”œâ”€â”€ index.md
â”‚   â”‚   â””â”€â”€ {subpastas}/
â”‚   â”œâ”€â”€ instructions/
â”‚   â”‚   â””â”€â”€ agent-skills-project.instructions.md
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â”œâ”€â”€ index.md
â”‚   â”‚   â””â”€â”€ {categorias}/
â”‚   â””â”€â”€ skills/
â”‚
â””â”€â”€ .copilot-project-worktrees/   # Worktrees do .copilot-project (nomes = branches)
    â”œâ”€â”€ _bw/bewiser.assistant.api/
    â”œâ”€â”€ _hv/STT/
    â”œâ”€â”€ docker-framework/
    â””â”€â”€ scripts/
```

### EstratÃ©gia de Branches

#### `.copilot-core`

- Branch Ãºnica: `main` (fonte de verdade e distribuiÃ§Ã£o)
- Projetos consumidores usam `main` (via submodule ou clone)

#### `.copilot-project`

| Branch | PropÃ³sito |
|--------|-----------|
| `main` | Template base agnÃ³stico |
| `_pm/copilot-core` | Dados deste projeto (workspace de desenvolvimento do core) |
| `{nome-projeto}` | Dados especÃ­ficos de cada projeto plugado |

### Projetos Consumidores

Nos projetos-alvo, a estrutura final Ã©:

```
{projeto}/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ instructions/
â”‚       â”œâ”€â”€ agent-skills-core.instructions.md      â†’ symlink â†’ ../../.copilot-core/instructions/agent-skills-core.instructions.md
â”‚       â””â”€â”€ agent-skills-project.instructions.md   â†’ symlink â†’ ../../.copilot-project/instructions/agent-skills-project.instructions.md
â”‚
â”œâ”€â”€ .copilot-core/                  # Submodule ou clone (branch main)
â””â”€â”€ .copilot-project/               # Submodule ou clone (branch do projeto)
    â””â”€â”€ instructions/
        â””â”€â”€ agent-skills-project.instructions.md   # Arquivo real especÃ­fico do projeto
```

**Modo aberto** (submodule): visÃ­vel no `.gitmodules`, onboarding via `git clone --recursive`.
**Modo stealth** (clone): `.copilot-core/`, `.copilot-project/` e symlinks no `.gitignore`, onboarding via script manual.

Os arquivos em `.github/instructions/` sÃ£o **symlinks**, nunca cÃ³pias. Isso garante sincronizaÃ§Ã£o automÃ¡tica com os repos de origem.

## Skills Core (59)

| Tipo | Skill | VersÃ£o | PropÃ³sito |
|------|-------|--------|-----------|
| agent | `agent-catalog-query` | 1.0 | **CatÃ¡logo** â€” Ã­ndice de skills agent |
| agent | `agent-memory-query` | 2.0 | Consultar liÃ§Ãµes aprendidas (com auto-init) |
| agent | `agent-memory-update` | 3.0 | Atualizar memÃ³ria do agente (preferences, patterns, decisions, concepts) |
| agent | `agent-task-manage` | 1.0 | Gerenciar tarefas complexas |
| code | `code-catalog-query` | 1.0 | **CatÃ¡logo** â€” Ã­ndice de skills code |
| code | `code-review-analyze` | 1.0 | AnÃ¡lise de qualidade, seguranÃ§a e performance |
| code | `code-refactor-extract` | 1.0 | ExtraÃ§Ã£o de mÃ©todos/classes, SRP |
| code | `code-pattern-enforce` | 1.0 | VerificaÃ§Ã£o e enforcement de padrÃµes |
| code | `code-dotnet-service` | 2.0 | GeraÃ§Ã£o de serviÃ§os/handlers .NET |
| code | `code-dotnet-test` | 2.0 | GeraÃ§Ã£o de testes unitÃ¡rios .NET |
| project | `project-context-query` | 2.0 | Consultar contexto do projeto (com auto-init) |
| project | `project-context-update` | 2.0 | Atualizar contexto (com auto-init) |
| project | `project-codemap-query` | 2.0 | Consultar mapa de cÃ³digo (com auto-init) |
| project | `project-codemap-update` | 2.0 | Registrar/atualizar artefatos (com auto-init) |
| project | `project-structure-analyze` | 1.0 | Analisar projeto e sugerir skills |
| project | `project-workspace-create` | 3.0 | Criar projeto completo (Plan mode) |
| project | `project-setup-bootstrap` | 5.0 | Configurar projeto (automÃ¡tico + manual) |
| project | `project-repo-update` | 1.0 | Atualizar repos core e project |
| project | `project-branch-switch` | 1.0 | Trocar branch do .copilot-project |
| project | `project-catalog-query` | 1.0 | **CatÃ¡logo** â€” Ã­ndice de skills project |
| skill | `skill-template-create` | 2.0 | Criar novos skills |
| editor | `editor-markdown-lint` | 1.0 | Regras de formataÃ§Ã£o Markdown |
| infra | `infra-catalog-query` | 1.0 | **CatÃ¡logo** â€” Ã­ndice de skills infra |
| infra | `infra-docker-build` | 1.0 | GeraÃ§Ã£o de Dockerfile multi-stage |
| infra | `infra-redis-cache` | 1.0 | PadrÃ£o cache-aside com Redis |
| infra | `infra-bigquery-query` | 1.0 | Queries BigQuery parametrizadas |
| infra | `infra-gcp-integrate` | 1.0 | IntegraÃ§Ã£o com serviÃ§os GCP |
| infra | `infra-k8s-deploy` | 1.0 | Manifests Kubernetes |
| infra | `infra-pipeline-deploy` | 1.0 | Pipelines CI/CD |
| infra | `infra-vertexai-prompt` | 1.0 | GestÃ£o de prompts Vertex AI |

### PadrÃµes dos Skills

- **Naming**: `{tipo}-{feature}-{aÃ§Ã£o}` â€” sempre 3 segmentos, kebab-case
- **Tipos**: `agent`, `code`, `project`, `skill`, `editor`, `infra`
- **category = tipo**: Primeiro segmento do nome no frontmatter
- **Estrutura**: `skills/{tipo}/{name}/SKILL.md` (organizados em subpastas por tipo)
- **Config pattern**: Skills `infra` e `code` carregam `config.yml` do project
- **Frontmatter**: YAML com `name`, `description`, `metadata` (`author`, `version`, `category`)
- **SeÃ§Ãµes**: `## Quando Usar` â†’ `## Workflow` com steps numerados
- **Output**: ConfirmaÃ§Ãµes com emojis (`âœ…`, `ğŸ“`, `ğŸ“š`, `ğŸ”„`, `ğŸ—ºï¸`, `ğŸ“‹`)
- **Auto-Init**: Skills de query/update inicializam estrutura automaticamente se nÃ£o existe
- **Core = lÃ³gica**: Regras genÃ©ricas ficam no core
- **Project = config**: Dados especÃ­ficos ficam em `config.yml` no project

## ConvenÃ§Ãµes

1. **PortuguÃªs para chat, inglÃªs para cÃ³digo**: VariÃ¡veis, nomes de arquivo, paths em inglÃªs
2. **Core Ã© genÃ©rico**: Nunca referenciar projetos especÃ­ficos nos skills core
3. **Responsabilidade Ãºnica**: Cada skill faz UMA coisa
4. **Conventional Commits**: `<type>(<scope>): <description>` (single-line, â‰¤250 chars)
5. **Instructions via symlink**: Arquivos em `.github/instructions/` sÃ£o sempre symlinks, nunca cÃ³pias
6. **Worktrees**: `.copilot-project` usa git worktrees em `.copilot-project-worktrees/` com nomes espelhando exatamente os nomes das branches

## Estado Atual

**Fase**: Ativo
**Status**: Core estÃ¡vel com 59 skills organizados em subpastas por tipo (nomenclatura `{tipo}-{feature}-{aÃ§Ã£o}`), sistema em uso em projetos reais. Suporte a dual-mode (aberto/stealth) para instalaÃ§Ã£o em projetos.

## Projetos Plugados

| Branch (.copilot-project) | Projeto | Status |
|---------------------------|---------|--------|
| `main` | Template base | â€” |
| `_pm/copilot-core` | Workspace de desenvolvimento do core | Ativo |
| `_hv/STT` | VoiceTranscription.AI (Hapvida) | Ativo |
| `scripts` | Scripts de automaÃ§Ã£o | Ativo |
| `docker-framework` | Docker Framework | â€” |

## InconsistÃªncias Conhecidas

| # | Issue | Local | Detalhe |
|---|-------|-------|---------|
| 1 | URLs hardcoded | `project-workspace-create` | `github.com/pdmartins/` nÃ£o parametrizado |
| 2 | `references/`, `scripts/`, `assets/` nÃ£o usados | `agent-skills-project.instructions.md` loading flow | Documentado mas nenhum skill implementa |

## Ãšltima AtualizaÃ§Ã£o

**Data**: 2026-02-14
**Motivo**: MigraÃ§Ã£o de self-dogfooding para .copilot-project (branch _pm/copilot-core), eliminaÃ§Ã£o do padrÃ£o excepcional de junction
