---
name: project-context-query
description: Consulta o contexto do projeto usando modelo index-first. L√™ context/index.md primeiro, carrega subpastas sob demanda (architecture, business-rules, code-map, conventions, infrastructure, team-process). Prioriza MCP para busca sem√¢ntica quando dispon√≠vel. Triggers: "qual √© o contexto", "que tecnologias usamos", antes de codificar, verificar restri√ß√µes.
metadata:
  author: copilot-core
  version: "3.0"
  category: project
  delegable: full
---

# Project Context Query

Consulta o contexto do projeto usando modelo index-first com deep-load sob demanda.

## Quando Usar

- In√≠cio de sess√£o ou tarefa complexa
- Verificar stack/tecnologias antes de implementar
- Confirmar restri√ß√µes antes de codificar
- Usu√°rio pergunta "qual √© o contexto do projeto?"

## Estrat√©gia de Busca

```
1. MCP memory-service dispon√≠vel?
   ‚îú‚îÄ‚îÄ SIM ‚Üí Busca sem√¢ntica por subtipo espec√≠fico
   ‚îî‚îÄ‚îÄ N√ÉO ‚Üí Fallback: index-first + deep-load
```

## Workflow

### 1. Tentar busca via MCP (preferencial)

Se MCP configurado:

```
mcp_memory_search_nodes({ query: "{termos: stack, restri√ß√µes, etc.}" })
```

Filtrar por `entityType` relevante (`context-infra`, `context-architecture`, etc.)

**Se MCP n√£o dispon√≠vel** ‚Üí passo 2.

### 2. Ler index.md (fallback)

Ler: `{workspace}/.copilot-project/context/index.md`

**Se n√£o existe** ‚Üí criar via Auto-Init.

### 3. Decidir se precisa deep-load

| Situa√ß√£o | A√ß√£o |
|----------|------|
| Index tem resumo suficiente | Usar diretamente |
| Precisa de stack detalhado | Carregar `infrastructure/*.md` |
| Precisa de restri√ß√µes | Carregar `business-rules/*.md` |
| Precisa de conven√ß√µes | Carregar `conventions/*.md` |
| Precisa de decis√µes arquiteturais | Carregar `architecture/*.md` |
| Consulta ampla | Ler index + subpastas relevantes |

### 4. Aplicar restri√ß√µes

Se a√ß√£o viola restri√ß√£o ‚Üí **PARAR** e informar. Sugerir alternativa.

### 5. Apresentar resumo

```
üìã **Contexto carregado**
- Stack: {tecnologias}
- Restri√ß√µes ativas: {n√∫mero}
- Estado: {fase}
```

## Subtipos de Contexto

| Subtipo | Pasta | Conte√∫do |
|---------|-------|----------|
| Architecture | `architecture/` | Decis√µes, estrutura, padr√µes de design |
| Business Rules | `business-rules/` | Regras de dom√≠nio, restri√ß√µes |
| Code Map | `code-map/` | Invent√°rio de artefatos |
| Conventions | `conventions/` | Nomenclatura, estilo, processos |
| Infrastructure | `infrastructure/` | Stack, ferramentas, integra√ß√µes |
| Team Process | `team-process/` | SDLC, normas (opt-in) |

## Auto-Init

Se `context/index.md` n√£o existe:

1. Criar `context/index.md` com template padr√£o
2. Criar subpastas com `.gitkeep`
3. Informar: `‚úÖ Contexto inicializado automaticamente`
