---
name: skill-output-validate
description: Valida a estrutura e qualidade dos artefatos de metadata do sistema â€” SKILL.md, instructions, catÃ¡logos, context, memory, code-map. Verifica frontmatter schema, naming conventions, consistÃªncia entre artefatos, e formato correto. Use apÃ³s criar/editar skills, instructions, ou artefatos de metadata. Triggers: "valida skills", "verifica estrutura", "valida instructions", "verifica consistÃªncia", apÃ³s skill-template-create.
metadata:
  author: copilot-core
  version: "1.0"
  category: skill
  delegable: full
---

# Skill Output Validate

Valida estrutura e qualidade dos artefatos de metadata do sistema de skills.

## Quando Usar

- ApÃ³s `skill-template-create` criar um novo skill
- ApÃ³s ediÃ§Ãµes manuais em SKILL.md, instructions, catÃ¡logos
- Sob demanda com "valida skills", "verifica estrutura"
- Como parte de uma review completa (chamado por `agent-action-review`)
- Antes de commit/push de mudanÃ§as no `.copilot-core` ou `.copilot-project`

## Quando NÃƒO Usar

- ValidaÃ§Ã£o de cÃ³digo-fonte (usar `code-review-analyze`)
- ValidaÃ§Ã£o de completude de side-effects (usar `agent-action-review`)
- ValidaÃ§Ã£o de API patterns (usar `code-api-validate`)

## Workflow

### 1. Determinar escopo

Aceitar um dos seguintes como input:

| Input | Escopo |
|-------|--------|
| Nome de skill especÃ­fico | Validar apenas esse SKILL.md + presenÃ§a nos catÃ¡logos/instructions |
| Tipo de artefato (`skills`, `instructions`, `catalogs`, `context`, `memory`, `codemap`) | Validar todos artefatos desse tipo |
| `all` | Validar tudo |
| Nenhum | Default: validar skills alterados na sessÃ£o atual |

### 2. Validar SKILL.md

Para cada SKILL.md no escopo:

#### Frontmatter Schema

| Campo | Regra | Severidade |
|-------|-------|------------|
| `name` | Presente, formato `{tipo}-{feature}-{aÃ§Ã£o}`, 3 segmentos, kebab-case | ğŸ”´ |
| `description` | Presente, inclui triggers, >20 chars | âš ï¸ |
| `metadata.author` | Presente | âš ï¸ |
| `metadata.version` | Presente, formato semver | âš ï¸ |
| `metadata.category` | Presente, igual ao primeiro segmento de `name` | ğŸ”´ |
| `metadata.delegable` | Presente, valor em `full\|orchestrated\|none` | âš ï¸ |

#### Naming Convention

| Regra | Exemplo vÃ¡lido | Exemplo invÃ¡lido |
|-------|---------------|-----------------|
| Exatamente 3 segmentos separados por `-` | `agent-chat-save` | `agent-save`, `agent-chat-save-v2` |
| Primeiro segmento = tipo vÃ¡lido | `agent`, `code`, `infra`, `project`, `skill`, `editor` | `tool`, `misc` |
| kebab-case | `agent-chat-save` | `agent-Chat-Save`, `agent_chat_save` |

#### SeÃ§Ãµes ObrigatÃ³rias

| SeÃ§Ã£o | ObrigatÃ³ria para |
|-------|-----------------|
| `## Quando Usar` | Todos |
| `## Workflow` | Todos |
| `## Config Loading` | Skills dos tipos `infra` e `code` |

#### Tamanho

| Regra | Limite |
|-------|--------|
| SKILL.md < 500 linhas | Progressive disclosure â€” se maior, considerar split |

### 3. Validar Instructions

Verificar consistÃªncia entre os 3 arquivos de instructions:

| Arquivo | Path |
|---------|------|
| Default | `.copilot-core/instructions/default.instructions.md` |
| Template | `.copilot-core/templates/workspace.instructions.md` |
| Project | `.copilot-project/instructions/workspace.instructions.md` |

#### Contagens

| VerificaÃ§Ã£o | Como |
|-------------|------|
| "Skills Core DisponÃ­veis (N)" | Contar skills Ãºnicos na tabela vs N declarado |
| CatÃ¡logos "N skills" | Contar skills no SKILL.md do catÃ¡logo vs N declarado |
| "full (N)" / "orchestrated (N)" / "none (N)" | Contar skills classificados vs N declarado (em default.instructions.md e agent-subagent-delegate) |

#### Tabelas de Skills

| VerificaÃ§Ã£o | Como |
|-------------|------|
| Skill existe fisicamente? | Verificar se `{tipo}/{name}/SKILL.md` existe em `.copilot-core/skills/` |
| Skill listado em toda tabela? | Cross-check entre default, template, project |
| Tipo correto? | `category` no frontmatter = tipo na tabela |
| Delegable correto? | `delegable` no frontmatter = valor na tabela (se coluna existir) |

### 4. Validar CatÃ¡logos

Para cada `{tipo}-catalog-query/SKILL.md`:

| VerificaÃ§Ã£o | Como |
|-------------|------|
| Todos os skills do tipo listados? | Listar skills em `.copilot-core/skills/{tipo}/` vs tabela do catÃ¡logo |
| Roteamento rÃ¡pido cobre cenÃ¡rios? | Verificar se situaÃ§Ãµes comuns tÃªm routing |
| Description inclui keywords? | Campo description no frontmatter menciona keywords de todos os skills indexados |

### 5. Validar Context (`project.md`)

| VerificaÃ§Ã£o | Como |
|-------------|------|
| Arquivo existe? | Check `.copilot-project/context/project.md` |
| SeÃ§Ãµes obrigatÃ³rias presentes? | Objetivo, Stack, Estado Atual |
| "Ãšltima AtualizaÃ§Ã£o" recente? | Data vs data atual |

### 6. Validar Memory (`lessons-learned.md`)

| VerificaÃ§Ã£o | Como |
|-------------|------|
| Formato XML correto? | Cada `<lesson>` tem `date`, `category`, `<context>`, `<decision>`, `<outcome>` |
| Categorias vÃ¡lidas? | Uma das: `arquitetura`, `padrÃµes`, `tooling`, `workflow`, `debug`, `performance`, `seguranÃ§a`, `regras`, `estrutura` |
| Sem duplicatas? | Verificar liÃ§Ãµes com context/decision similares |
| `supersedes` referencia liÃ§Ã£o existente? | Se presente, verificar que a liÃ§Ã£o referenciada existe |

### 7. Validar Code-Map

| VerificaÃ§Ã£o | Como |
|-------------|------|
| `index.md` existe? | Check `.copilot-project/context/code-map/index.md` |
| Artefatos correspondem a arquivos reais? | Cross-check paths listados vs filesystem |
| Tipagem consistente? | service, model, api, component, util, config |

### 8. Gerar RelatÃ³rio

```
ğŸ“‹ **ValidaÃ§Ã£o de Artefatos**

### SKILL.md
âœ… `agent-chat-save` â€” frontmatter vÃ¡lido, naming OK, seÃ§Ãµes completas
âš ï¸ `infra-docker-build` â€” falta seÃ§Ã£o "Config Loading" (obrigatÃ³ria para tipo infra)
ğŸ”´ `code-novo-skill` â€” category "code" mas name comeÃ§a com "code" incorretamente â†’ 2 segmentos apenas

### Instructions
âœ… Contagem de skills: 56 (correto)
âš ï¸ Template workspace.instructions.md diz "53 skills" (desatualizado)
ğŸ”´ `agent-action-review` nÃ£o listado na tabela de default.instructions.md

### CatÃ¡logos
âœ… `code-catalog-query` â€” 21 skills listados, todos existem
âš ï¸ `agent-catalog-query` â€” description nÃ£o menciona keyword "review"

### Memory
âœ… 8 liÃ§Ãµes â€” formato XML vÃ¡lido, categorias vÃ¡lidas
âš ï¸ PossÃ­vel duplicata: liÃ§Ã£o 2026-02-15 "naming" e liÃ§Ã£o 2026-02-15 "chat naming"

**AÃ§Ãµes necessÃ¡rias**: {lista priorizada}
```

### Severidades

| NÃ­vel | Significado | Exemplo |
|-------|-------------|---------|
| âœ… | VÃ¡lido | Frontmatter completo e correto |
| âš ï¸ | AtenÃ§Ã£o â€” funciona mas nÃ£o ideal | Description sem triggers, contagem desatualizada |
| ğŸ”´ | InvÃ¡lido â€” precisa de correÃ§Ã£o | Naming convention violada, skill nÃ£o listado |

## Checklist RÃ¡pida

- [ ] Frontmatter: name, description, metadata.author, metadata.version, metadata.category, metadata.delegable
- [ ] Naming: 3 segmentos, kebab-case, tipo vÃ¡lido, category = tipo
- [ ] SeÃ§Ãµes: Quando Usar, Workflow, Config Loading (se infra/code)
- [ ] Tamanho: < 500 linhas
- [ ] Instructions: contagens corretas nos 3 arquivos
- [ ] Instructions: skill listado nas tabelas dos 3 arquivos
- [ ] CatÃ¡logo: skill listado no catÃ¡logo do seu tipo
- [ ] agent-subagent-delegate: skill listado com classificaÃ§Ã£o correta
- [ ] Memory: formato XML, categorias vÃ¡lidas, sem duplicatas
- [ ] Code-map: artefatos correspondem a arquivos existentes
