# Project Context â€” Copilot Core

Estado atual do projeto para referÃªncia do Copilot.

---

## Objetivo

Sistema de instruÃ§Ãµes e skills reutilizÃ¡veis para o Copilot Agent, seguindo o padrÃ£o [Agent Skills](https://agentskills.io). Fornece um core genÃ©rico (`.copilot-core`) que Ã© plugado via git submodule em qualquer projeto, junto com um repositÃ³rio de dados por projeto (`.copilot-project`) com branch por projeto.

## Repos

| Repo | URL | PropÃ³sito |
|------|-----|-----------|
| `.copilot-core` | `https://github.com/pdmartins/.copilot-core.git` | Skills genÃ©ricos, instruÃ§Ãµes globais, templates |
| `.copilot-project` | `https://github.com/pdmartins/.copilot-project.git` | Contexto, memÃ³ria e skills especÃ­ficos por projeto (branch por projeto) |

## Stack

| Componente | Tecnologia |
|------------|------------|
| Formato | Markdown (Agent Skills pattern) |
| Versionamento | Git (submodules para distribuiÃ§Ã£o) |
| CI/CD | GitHub Actions (`sync-core.yml`) |
| PadrÃ£o | [Agent Skills](https://agentskills.io) |
| Commit | Conventional Commits |
| Linting | markdownlint (via extensÃ£o VS Code) |

## Arquitetura

**Workspace de desenvolvimento** com dois repos lado a lado, gerenciados pelo `.copilot-core.code-workspace`:

```
copilot/                          # Pasta raiz do workspace
â”œâ”€â”€ .copilot-core/                # Repo principal (branch main)
â”‚   â”œâ”€â”€ .github/                  # Infraestrutura do prÃ³prio core (NÃƒO distribuÃ­do)
â”‚   â”‚   â”œâ”€â”€ context/              # â† Contexto deste projeto (self-dogfooding)
â”‚   â”‚   â”‚   â””â”€â”€ project.md
â”‚   â”‚   â”œâ”€â”€ memory/               # â† MemÃ³ria deste projeto (self-dogfooding)
â”‚   â”‚   â”‚   â””â”€â”€ lessons-learned.md
â”‚   â”‚   â”œâ”€â”€ docs/
â”‚   â”‚   â”‚   â””â”€â”€ QUICK-START.md
â”‚   â”‚   â”œâ”€â”€ instructions/
â”‚   â”‚   â”‚   â””â”€â”€ workspace.instructions.md
â”‚   â”‚   â””â”€â”€ workflows/
â”‚   â”‚       â””â”€â”€ sync-core.yml
â”‚   â”œâ”€â”€ .source-control/
â”‚   â”‚   â””â”€â”€ commit-prompt.md
â”‚   â”œâ”€â”€ instructions/             # â† DistribuÃ­do via branch core
â”‚   â”‚   â””â”€â”€ default.instructions.md
â”‚   â”œâ”€â”€ skills/                   # â† DistribuÃ­do via branch core (18 skills)
â”‚   â”‚   â””â”€â”€ {skill-name}/SKILL.md
â”‚   â””â”€â”€ templates/                # â† DistribuÃ­do via branch core
â”‚       â””â”€â”€ workspace.instructions.md
â”‚
â”œâ”€â”€ .copilot-project/             # Repo auxiliar (branch por projeto)
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ project.md
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â””â”€â”€ lessons-learned.md
â”‚   â””â”€â”€ skills/
â”‚
â””â”€â”€ .github â†’ .copilot-core/.github  # Junction link para self-dogfooding
```

### EstratÃ©gia de Branches

#### `.copilot-core`

| Branch | PropÃ³sito | ConteÃºdo |
|--------|-----------|----------|
| `main` | Desenvolvimento do core | Tudo (`.github/`, `.source-control/`, workspace file) |
| `core` | DistribuiÃ§Ã£o para projetos | Apenas `instructions/`, `skills/`, `templates/` |

O workflow `sync-core.yml` sincroniza `main` â†’ `core` automaticamente ao push, excluindo `.github/`.

#### `.copilot-project`

| Branch | PropÃ³sito |
|--------|-----------|
| `main` | Template base agnÃ³stico |
| `{nome-projeto}` | Dados especÃ­ficos de cada projeto |

### Projetos Consumidores

Nos projetos-alvo, a estrutura final Ã©:

```
{projeto}/
â””â”€â”€ .github/
    â”œâ”€â”€ instructions/
    â”‚   â””â”€â”€ workspace.instructions.md   # Copiado do template
    â”œâ”€â”€ .copilot-core/                  # Submodule (branch core)
    â””â”€â”€ .copilot-project/               # Submodule (branch do projeto)
```

## Skills Core (18)

| Categoria | Skill | VersÃ£o | PropÃ³sito |
|-----------|-------|--------|-----------|
| Agent | `agent-memory-init` | 1.0 | Inicializar estrutura de memÃ³ria |
| Agent | `agent-memory-query` | 1.0 | Consultar liÃ§Ãµes aprendidas |
| Agent | `agent-memory-register` | 1.0 | Registrar novas liÃ§Ãµes |
| Agent | `agent-todo` | 1.0 | Gerenciar tarefas complexas |
| Code Map | `code-map-init` | 1.0 | Inicializar mapa de cÃ³digo |
| Code Map | `code-map-query` | 1.0 | Consultar artefatos existentes |
| Code Map | `code-map-update` | 1.0 | Registrar/atualizar artefatos |
| Project | `project-analyze` | 1.0 | Analisar projeto e sugerir skills |
| Project | `project-bootstrap` | 4.0 | Configurar projeto com submodules existentes |
| Project | `project-context-init` | 1.0 | Inicializar contexto do projeto |
| Project | `project-context-query` | 1.0 | Consultar contexto do projeto |
| Project | `project-context-update` | 1.0 | Atualizar contexto do projeto |
| Project | `project-create` | 3.0 | Criar projeto completo (Plan mode) |
| Project | `project-init` | 2.0 | Guia manual de inicializaÃ§Ã£o |
| Project | `project-switch-branch` | 1.0 | Trocar branch do .copilot-project |
| Project | `project-update` | 1.0 | Atualizar repos core e project |
| Skill | `skill-create` | 1.0 | Criar novos skills |
| Editor | `editor-markdown` | 1.0 | Regras de formataÃ§Ã£o Markdown |

### PadrÃµes dos Skills

- **Naming**: `{contexto}-{funcionalidade}` (kebab-case)
- **Estrutura**: `skills/{name}/SKILL.md` (arquivo Ãºnico por skill)
- **Frontmatter**: YAML com `name`, `description`, `metadata` (`author`, `version`, `category`)
- **SeÃ§Ãµes**: `## Quando Usar` â†’ `## Workflow` com steps numerados
- **Output**: ConfirmaÃ§Ãµes com emojis (`âœ…`, `ğŸ“`, `ğŸ“š`, `ğŸ”„`, `ğŸ—ºï¸`, `ğŸ“‹`)
- **Fallback**: Skills de query redirecionam para `*-init` se estrutura nÃ£o existe
- **Lifecycle**: Triplet Init â†’ Query â†’ Update para memÃ³ria, contexto e code-map

## ConvenÃ§Ãµes

1. **Self-dogfooding**: O `.copilot-core` usa seu prÃ³prio sistema de memÃ³ria e contexto para governar seu desenvolvimento, excepcionalmente dentro de `.copilot-core/.github/`
2. **Junction link**: No workspace de desenvolvimento, `.github` na raiz aponta para `.copilot-core/.github/` via junction
3. **PortuguÃªs para chat, inglÃªs para cÃ³digo**: VariÃ¡veis, nomes de arquivo, paths em inglÃªs
4. **Core Ã© genÃ©rico**: Nunca referenciar projetos especÃ­ficos nos skills core
5. **Responsabilidade Ãºnica**: Cada skill faz UMA coisa
6. **Conventional Commits**: `<type>(<scope>): <description>` (single-line, â‰¤250 chars)

## Estado Atual

**Fase**: Ativo
**Status**: Core estÃ¡vel com 18 skills, sistema em uso em projetos reais (STT/VoiceTranscription)

## Projetos Plugados

| Branch (.copilot-project) | Projeto | Status |
|---------------------------|---------|--------|
| `main` | Template base | â€” |
| `_hv/STT` | VoiceTranscription.AI (Hapvida) | Ativo |
| `scripts` | Scripts de automaÃ§Ã£o | Ativo |
| `docker-framework` | Docker Framework | â€” |

## InconsistÃªncias Conhecidas

| # | Issue | Local | Detalhe |
|---|-------|-------|---------|
| 1 | `project-update` nota final incorreta | `skills/project-update/SKILL.md` | Diz "Core usa branch `main`" â€” deveria ser `core` |
| 2 | `workspace.instructions.md` (.github/) desatualizado | `.github/instructions/workspace.instructions.md` | Falta code-map, branch strategy, conta 15 skills em vez de 18 |
| 3 | Categorias code-map inconsistentes | `code-map-*/SKILL.md` frontmatter | Diz `category: project` mas tabelas listam como "Code Map" |
| 4 | URLs hardcoded | `project-create`, `project-init` | `github.com/pdmartins/` nÃ£o parametrizado |
| 5 | `references/`, `scripts/`, `assets/` nÃ£o usados | `workspace.instructions.md` loading flow | Documentado mas nenhum skill implementa |
| 6 | `project-update` nota sobre `.gitignore` | `skills/project-update/SKILL.md` | Submodules sÃ£o tracked por `.gitmodules`, nÃ£o por `.gitignore` |

## Ãšltima AtualizaÃ§Ã£o

**Data**: 2026-02-10
**Motivo**: CriaÃ§Ã£o inicial â€” anÃ¡lise profunda do projeto e self-dogfooding do contexto
