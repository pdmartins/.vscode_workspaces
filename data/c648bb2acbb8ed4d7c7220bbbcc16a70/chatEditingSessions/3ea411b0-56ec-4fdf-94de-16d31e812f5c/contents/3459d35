---
name: project-workspace-create
description: Cria e configura um novo projeto completo a partir do workspace .copilot-core. Coleta contexto profundo, cria branch no .copilot-project com contexto, memÃ³ria e skills especÃ­ficos preenchidos, e fornece script para plugar no projeto-alvo. Recomendado usar com Plan mode. Triggers - criar projeto, novo projeto, onboard projeto, preparar projeto, registrar projeto.
metadata:
  author: copilot-core
  version: "3.0"
  category: project
  delegable: none
---

# Project Workspace Create

Cria e configura um novo projeto **completo** a partir do workspace .copilot-core/.copilot-project.

> **ðŸ’¡ Usar com Plan mode** â€” Este skill envolve muitas decisÃµes (skills a criar, contexto a preencher, estrutura). O Plan mode permite que o usuÃ¡rio revise tudo antes de executar.

## Quando Usar

- UsuÃ¡rio estÃ¡ neste workspace e quer preparar um novo projeto
- Diz "criar projeto", "novo projeto", "onboard projeto X"
- Quer que branch, contexto, skills e memÃ³ria jÃ¡ estejam prontos antes de plugar

## Fluxo

```
Workspace .copilot-core                    Projeto-alvo
         â†“                                      â†“
1. Coletar contexto profundo              11. Colar script
2. Definir skills especÃ­ficos             12. git add && commit
3. Criar branch no .copilot-project        â†’ Pronto!
4. Preencher context/project.md
5. Criar skills do projeto
6. Gerar workspace.instructions.md
7. Inicializar memÃ³ria
8. Commit e push
9. Criar worktree
10. Gerar script
```

## Workflow

### 0. Verificar modo Plan

**ANTES de qualquer outra coisa**, perguntar ao usuÃ¡rio:

> âš ï¸ **Este skill funciona melhor em Plan mode**, que permite revisar contexto, skills propostos e estrutura antes de executar.
>
> VocÃª estÃ¡ usando **Plan mode**? Se nÃ£o, recomendo trocar antes de continuar:
> - No Copilot Chat, mude o modo para **Plan** (Ã­cone ao lado do campo de input)
> - Depois repita o pedido

**Se o usuÃ¡rio confirmar que estÃ¡ em Plan mode** â†’ continuar.
**Se o usuÃ¡rio quiser continuar em Agent mode** â†’ prosseguir, mas avisar que nÃ£o poderÃ¡ revisar o plano antes da execuÃ§Ã£o.

### 1. Coletar contexto profundo

Entrevista conversacional **aprofundada**. NÃ£o pular etapas â€” quanto mais contexto, melhor o agente funciona no projeto-alvo.

**Identidade do projeto:**
1. **Nome** â€” serÃ¡ o nome da branch (sugerir kebab-case)
2. **Resumo** â€” o que o projeto faz, para quem, qual problema resolve
3. **Fase atual** â€” inicial, ativo, manutenÃ§Ã£o, legado

**Stack e arquitetura:**
4. **Linguagens** â€” principal + secundÃ¡rias
5. **Frameworks** â€” web, backend, mobile, etc.
6. **Banco de dados** â€” tipo e tecnologia
7. **Infra** â€” Docker, K8s, cloud provider, CI/CD
8. **Arquitetura** â€” monolito, microserviÃ§os, serverless, monorepo
9. **Estrutura principal** â€” pastas-chave (src/, apps/, packages/)

**PadrÃµes e convenÃ§Ãµes:**
10. **Code style** â€” linters, formatters, naming conventions
11. **Git flow** â€” trunk-based, gitflow, branch naming
12. **Testes** â€” unit, integration, e2e, cobertura esperada
13. **DocumentaÃ§Ã£o** â€” onde, formato, idioma

**DomÃ­nio e regras:**
14. **DomÃ­nio** â€” termos especÃ­ficos do negÃ³cio que o agente deve conhecer
15. **RestriÃ§Ãµes** â€” seguranÃ§a, compliance, performance, acessibilidade
16. **IntegraÃ§Ãµes** â€” APIs externas, serviÃ§os de terceiros

> **Nota:** Adaptar as perguntas ao contexto. Se o usuÃ¡rio diz "Ã© um CLI em Go", nÃ£o perguntar sobre banco de dados. Ser inteligente sobre o que Ã© relevante.

### 2. Definir skills especÃ­ficos

Com base nas respostas, **propor skills** para o `.copilot-project/skills/`:

**CatÃ¡logo de skills comuns por stack:**

| Stack | Skills sugeridos |
|-------|-----------------|
| Frontend (React, Vue, etc.) | `component-create`, `style-guide`, `state-management` |
| Backend API (Node, .NET, etc.) | `api-endpoint`, `db-migration`, `error-handling` |
| Mobile (React Native, Flutter) | `screen-create`, `navigation-pattern` |
| CLI | `command-create`, `cli-testing` |
| Infra/DevOps | `dockerfile-guide`, `pipeline-create`, `deploy-checklist` |
| Monorepo | `package-create`, `cross-package-rules` |
| Full-stack | Combinar frontend + backend acima |

**Para cada skill proposto, definir:**
- Nome (formato `{contexto}-{funcionalidade}`)
- DescriÃ§Ã£o (o que faz + triggers)
- ConteÃºdo principal (workflow, templates, regras)

**Sempre incluir pelo menos:**
- 1 skill de padrÃ£o de cÃ³digo (coding conventions do projeto)
- Skills adicionais conforme stack detectada

> **Apresentar ao usuÃ¡rio a lista de skills propostos para aprovaÃ§Ã£o antes de criar.** No Plan mode, isso acontece naturalmente.

### 3. Verificar se branch jÃ¡ existe

No `.copilot-project/`:

```bash
git branch --list {nome-projeto}
git ls-remote --heads origin {nome-projeto}
```

- **Se existir**: Avisar e perguntar se deseja sobrescrever
- **Se nÃ£o existir**: Continuar

### 4. Criar branch no .copilot-project

```bash
cd .copilot-project
git checkout main
git pull origin main
git checkout -b {nome-projeto}
```

### 5. Preencher context/project.md

Gerar com as informaÃ§Ãµes coletadas â€” **documento rico**, nÃ£o template genÃ©rico:

```markdown
# Contexto do Projeto: {nome}

## Status
- **Fase**: {fase}
- **Ãšltima atualizaÃ§Ã£o**: {data}

## Resumo

{resumo detalhado â€” 2-3 parÃ¡grafos com propÃ³sito, pÃºblico e problema que resolve}

## Stack

- **Linguagem**: {principal} + {secundÃ¡rias}
- **Framework**: {framework(s)}
- **Banco de dados**: {tipo + tecnologia}
- **Infra**: {Docker, CI/CD, cloud}
- **Build/Tooling**: {bundler, package manager, linters}

## Arquitetura

{descriÃ§Ã£o da arquitetura â€” monolito/microserviÃ§os/etc.}

### Estrutura de Pastas

```
{estrutura principal do projeto}
```

### Componentes Principais

| Componente | Responsabilidade |
|------------|-----------------|
| {nome} | {o que faz} |

## PadrÃµes e ConvenÃ§Ãµes

### Code Style
{naming, formataÃ§Ã£o, regras de lint}

### Git
{branch naming, commit messages, flow}

### Testes
{estratÃ©gia, ferramentas, cobertura esperada}

## DomÃ­nio

### GlossÃ¡rio

| Termo | Significado |
|-------|-------------|
| {termo} | {definiÃ§Ã£o} |

### Regras de NegÃ³cio

{regras importantes que o agente deve respeitar}

## RestriÃ§Ãµes

{seguranÃ§a, compliance, performance, acessibilidade}

## IntegraÃ§Ãµes

| ServiÃ§o | PropÃ³sito | Docs |
|---------|-----------|------|
| {nome} | {para que} | {link} |

## PrÃ³ximos Passos

- [ ] Plugar submodules no projeto (script abaixo)
- [ ] Verificar skills criados e ajustar conforme necessÃ¡rio
- [ ] Executar `project-structure-analyze` no projeto-alvo para refinamento
```

> **Nota:** Preencher apenas as seÃ§Ãµes relevantes. NÃ£o forÃ§ar seÃ§Ãµes vazias. Se o projeto nÃ£o tem banco de dados, omitir. Se nÃ£o tem integraÃ§Ãµes, omitir.

### 6. Criar skills do projeto

Para cada skill aprovado na etapa 2:

1. Criar diretÃ³rio em `.copilot-project/skills/{nome}/`
2. Criar `SKILL.md` seguindo o padrÃ£o Agent Skills:

```markdown
---
name: {contexto}-{funcionalidade}
description: {descriÃ§Ã£o clara + triggers}
metadata:
  author: {nome-projeto}
  version: "1.0"
  category: {categoria}
---

# {Nome do Skill}

{conteÃºdo: workflow, templates, regras, exemplos}
```

**Regras para skills de projeto:**
- Ser **especÃ­fico** â€” referenciar nomes reais de pastas, libs, padrÃµes do projeto
- Incluir **exemplos** com o stack real do projeto
- Definir **triggers** claros para quando o skill deve ativar

### 7. Gerar workspace.instructions.md do projeto

Criar `.copilot-project/instructions/workspace.instructions.md` baseado no template `.copilot-core/templates/workspace.instructions.md`, personalizado com informaÃ§Ãµes do projeto.

> **Nota:** Este arquivo Ã© armazenado no `.copilot-project/instructions/` e vinculado via symlink para `.github/instructions/` no projeto-alvo.

### 8. Inicializar memory/lessons-learned.md

```markdown
# LiÃ§Ãµes Aprendidas - {nome}

## Sobre este arquivo

Este arquivo registra liÃ§Ãµes aprendidas durante o desenvolvimento do projeto.
O Copilot Agent consulta e atualiza este arquivo automaticamente.

---

## LiÃ§Ãµes

> Nenhuma liÃ§Ã£o registrada ainda.
```

### 9. Commit e push

```bash
cd .copilot-project   # (se nÃ£o estiver jÃ¡)
git add .
git commit -m "feat: configuraÃ§Ã£o inicial do projeto {nome}"
git push -u origin {nome-projeto}
```

Voltar para branch anterior:
```bash
git checkout main
```

### 10. Criar worktree no workspace de desenvolvimento

Criar uma worktree para a nova branch, permitindo acesso simultÃ¢neo aos arquivos de todos os projetos sem trocar de branch:

```bash
cd .copilot-project
git worktree add ../.copilot-project-worktrees/{nome-projeto} {nome-projeto}
```

**Regras:**
- O nome do diretÃ³rio da worktree **deve ser idÃªntico** ao nome da branch
- Se a branch tem `/` (ex: `_hv/STT`), criar subdiretÃ³rios correspondentes (ex: `.copilot-project-worktrees/_hv/STT/`)
- Verificar com `git worktree list` que a worktree foi criada corretamente

**Resultado esperado:**
```
.copilot-project-worktrees/
â”œâ”€â”€ {projetos existentes}/
â””â”€â”€ {nome-projeto}/          â† nova worktree
    â”œâ”€â”€ context/
    â”œâ”€â”€ memory/
    â””â”€â”€ skills/
```

> Isso permite comparaÃ§Ã£o direta de instruÃ§Ãµes, contexto e skills entre projetos.

### 11. Gerar script para o projeto-alvo

Gerar os comandos para o usuÃ¡rio colar no terminal do projeto-alvo.
Sempre fornecer **ambas as versÃµes** (PowerShell e Bash) e **ambos os modos** (aberto e stealth).

> **Perguntar ao usuÃ¡rio:** "O projeto permite submodules visÃ­veis no repositÃ³rio? Ou precisa ser modo stealth (invisÃ­vel)?"

#### Modo Aberto (submodule â€” visÃ­vel no repo)

**Windows (PowerShell):**
```powershell
# Copilot Agent Skills - Setup (Modo Aberto)
mkdir .github\instructions -Force
git submodule add -b main https://github.com/pdmartins/.copilot-core.git .copilot-core
git submodule add -b {nome-projeto} https://github.com/pdmartins/.copilot-project.git .copilot-project
# Criar symlinks para instructions
cmd /c mklink ".github\instructions\default.instructions.md" "..\..\copilot-core\instructions\default.instructions.md"
cmd /c mklink ".github\instructions\workspace.instructions.md" "..\..\copilot-project\instructions\workspace.instructions.md"
git add .
git commit -m "feat: add copilot agent"
```

**Linux/Mac (Bash):**
```bash
# Copilot Agent Skills - Setup (Modo Aberto)
mkdir -p .github/instructions
git submodule add -b main https://github.com/pdmartins/.copilot-core.git .copilot-core
git submodule add -b {nome-projeto} https://github.com/pdmartins/.copilot-project.git .copilot-project
# Criar symlinks para instructions
ln -s ../../.copilot-core/instructions/default.instructions.md .github/instructions/default.instructions.md
ln -s ../../.copilot-project/instructions/workspace.instructions.md .github/instructions/workspace.instructions.md
git add .
git commit -m "feat: add copilot agent"
```

#### Modo Stealth (clone + gitignore â€” invisÃ­vel no repo)

**Windows (PowerShell):**
```powershell
# Copilot Agent Skills - Setup (Modo Stealth)
git clone -b main https://github.com/pdmartins/.copilot-core.git .copilot-core
git clone -b {nome-projeto} https://github.com/pdmartins/.copilot-project.git .copilot-project
mkdir .github\instructions -Force
cmd /c mklink ".github\instructions\default.instructions.md" "..\..\copilot-core\instructions\default.instructions.md"
cmd /c mklink ".github\instructions\workspace.instructions.md" "..\..\copilot-project\instructions\workspace.instructions.md"
# Adicionar ao .gitignore
Add-Content .gitignore "`n# Copilot Agent Skills (local only)`n.copilot-core/`n.copilot-project/`n.github/instructions/default.instructions.md`n.github/instructions/workspace.instructions.md"
git add .gitignore
git commit -m "chore: gitignore copilot agent local files"
```

**Linux/Mac (Bash):**
```bash
# Copilot Agent Skills - Setup (Modo Stealth)
git clone -b main https://github.com/pdmartins/.copilot-core.git .copilot-core
git clone -b {nome-projeto} https://github.com/pdmartins/.copilot-project.git .copilot-project
mkdir -p .github/instructions
ln -s ../../.copilot-core/instructions/default.instructions.md .github/instructions/default.instructions.md
ln -s ../../.copilot-project/instructions/workspace.instructions.md .github/instructions/workspace.instructions.md
# Adicionar ao .gitignore
cat >> .gitignore << 'EOF'

# Copilot Agent Skills (local only)
.copilot-core/
.copilot-project/
.github/instructions/default.instructions.md
.github/instructions/workspace.instructions.md
EOF
git add .gitignore
git commit -m "chore: gitignore copilot agent local files"
```

### 12. Output final

```
âœ… Projeto "{nome}" criado!

ðŸ“‹ Branch: {nome-projeto}
ðŸ“ Contexto: .copilot-project/context/project.md
ðŸ§  MemÃ³ria: .copilot-project/memory/lessons-learned.md
ðŸ”§ Skills: {lista de skills criados}
ðŸŒ³ Worktree: .copilot-project-worktrees/{nome-projeto}/

Para plugar no projeto, rode na raiz dele:
```

(incluir os scripts PowerShell e Bash acima)

## Notas

- **Usar Plan mode** â€” permite revisar contexto, skills e estrutura antes de executar
- Este skill opera **neste workspace** (.copilot-core + .copilot-project), nÃ£o no projeto-alvo
- O script assume que o projeto-alvo tem Git inicializado
- Se o usuÃ¡rio nÃ£o tiver acesso push ao `.copilot-project`, ele nÃ£o poderÃ¡ criar a branch remotamente
- ApÃ³s plugar no projeto-alvo, rodar `project-structure-analyze` para refinar com base no cÃ³digo real

## ReferÃªncia

| MÃ©todo | Onde roda | O que faz |
|--------|-----------|-----------|
| **project-workspace-create** | Workspace core (Plan) | Cria branch + contexto + skills + script |
| **project-setup-bootstrap** | Projeto-alvo (Agent) | Configura/atualiza contexto apÃ³s submodules |
| **project-setup-bootstrap** (Modo Manual) | Qualquer lugar | Guia manual passo a passo |
