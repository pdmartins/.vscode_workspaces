---
name: project-branch-switch
description: Troca a branch do .copilot-project para carregar configura√ß√µes de outro projeto. Use quando trabalhar em m√∫ltiplos projetos que compartilham o mesmo core, ou quando precisar alternar entre configura√ß√µes. Triggers: "trocar projeto", "mudar branch", "carregar config de", "alternar para projeto".
metadata:
  author: copilot-core
  version: "1.0"
  category: project
  delegable: orchestrated
---

# Project Branch Switch

Troca a branch do .copilot-project para usar configura√ß√µes de outro projeto.

## Quando Usar

- Trabalhar em m√∫ltiplos projetos com mesmo core
- Alternar entre configura√ß√µes diferentes
- Carregar skills espec√≠ficos de outro projeto
- Testar configura√ß√µes de outra branch

## Contexto

O `.copilot-project/` usa uma branch por projeto:
- `projeto-a` ‚Üí branch com skills do projeto A
- `projeto-b` ‚Üí branch com skills do projeto B
- O core permanece o mesmo (branch `main`)

## Workflow

### 1. Verificar branch atual

```bash
cd .copilot-project
git branch --show-current
```

**Output**:
```
üìç Branch atual: {branch-atual}
```

### 2. Listar branches dispon√≠veis

```bash
git fetch
git branch -r
```

**Output**:
```
üìã Branches dispon√≠veis:
- origin/projeto-a
- origin/projeto-b
- origin/projeto-c
```

### 3. Selecionar branch

**Perguntar ao usu√°rio:**
```
Qual branch deseja usar?
```

### 4. Verificar mudan√ßas locais

```bash
git status
```

**Se h√° mudan√ßas n√£o commitadas:**
‚Üí Perguntar se deve fazer stash ou commit
‚Üí `git stash` ou `git commit -m "WIP"`

### 5. Trocar branch

```bash
git checkout {nova-branch}
```

**Se branch n√£o existe localmente:**
```bash
git checkout -b {nova-branch} origin/{nova-branch}
```

### 6. Confirmar troca

**Output**:
```
‚úÖ **Branch alterada**
- De: {branch-anterior}
- Para: {nova-branch}
- Skills carregados: {lista de skills da nova branch}
```

## Criar Nova Branch

Para criar branch para novo projeto:

```bash
cd .copilot-project
git checkout -b {nome-novo-projeto}
# Configurar skills espec√≠ficos
git push -u origin {nome-novo-projeto}
```

## Subagent Pattern

**Tipo**: `orchestrated` ‚Äî pre-collect (branch + a√ß√£o para mudan√ßas locais)

### Coleta (main agent)

Main agent coleta do usu√°rio:
1. Branch desejada (ou listar dispon√≠veis primeiro)
2. Como tratar mudan√ßas locais: `stash`, `commit`, ou `abort`

### Execu√ß√£o (subagent)

Subagent recebe decis√µes e executa sequ√™ncia git:
- Verifica mudan√ßas locais ‚Üí aplica a√ß√£o definida
- Executa checkout para branch desejada
- Confirma troca

### Prompt Exemplo

```
runSubagent({
  description: "Switch project branch",
  prompt: "Leia .copilot-core/skills/project/project-branch-switch/SKILL.md. Trocar .copilot-project/ para branch '{branch}'. A√ß√£o para mudan√ßas locais: {stash|commit|abort}. Retorne: branch anterior, branch atual, skills carregados."
})
```
