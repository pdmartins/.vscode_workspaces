---
name: project-setup-bootstrap
description: Configura o projeto via Copilot Chat quando submodules jÃ¡ existem. Preenche context/project.md, inicializa memÃ³ria, analisa stack. Inclui modo manual para ambientes com restriÃ§Ãµes. Se submodules nÃ£o existem, orienta a usar project-workspace-create no workspace core. Triggers - configurar projeto, configurar copilot, setup do projeto, bootstrap, inicializar contexto do projeto, configure este projeto, inicializar projeto manualmente, passo a passo.
metadata:
  author: copilot-core
  version: "5.0"
  category: project
  delegable: orchestrated
---

# Project Setup Bootstrap

Configura o projeto via Copilot Chat quando os submodules jÃ¡ existem.

## Fluxo Geral

```
project-workspace-create (workspace core)  â†’  script no projeto-alvo  â†’  project-setup-bootstrap
         â†“                              â†“                          â†“
  cria branch                     pluga submodules            analisa stack
  preenche contexto               cria symlinks               ajusta contexto
  gera script
```

## PrÃ©-condiÃ§Ã£o

Os submodules devem existir em `.copilot-core/` e `.copilot-project/`.

**Se nÃ£o existirem**, orientar o usuÃ¡rio:

1. Abrir o workspace `.copilot-core` + `.copilot-project`
2. No Copilot Chat, dizer: "criar projeto {nome}"
3. O agente vai gerar um script para colar no projeto-alvo

## Quando Usar

- Submodules jÃ¡ existem, mas contexto precisa ser configurado/atualizado
- UsuÃ¡rio diz "configurar projeto", "setup", "bootstrap", "configurar copilot"
- `context/project.md` ainda estÃ¡ com template padrÃ£o

## Workflow

### 1. Verificar submodules

Verificar se `.copilot-core/` e `.copilot-project/` existem.

- **Se nÃ£o existirem:** Orientar a usar `project-workspace-create` no workspace core (ver PrÃ©-condiÃ§Ã£o acima).
- **Se existirem:** Continuar para configuraÃ§Ã£o.

### 2. Analisar o projeto

Identificar automaticamente:

- **Stack tÃ©cnica**: Examinar arquivos como `package.json`, `*.csproj`, `Cargo.toml`, `pyproject.toml`, `go.mod`, `pom.xml`, etc.
- **Frameworks**: React, Next.js, Django, FastAPI, ASP.NET, etc.
- **Ferramentas**: Docker, CI/CD, linters, formatters
- **Estrutura de pastas**: src/, lib/, tests/, etc.

### 3. Coletar informaÃ§Ãµes do usuÃ¡rio

Perguntar de forma conversacional:

1. **Resumo do projeto** â€” "Me descreva brevemente o que este projeto faz"
2. **Fase atual** â€” "Em que fase estÃ¡? (inicial, desenvolvimento, produÃ§Ã£o)"
3. **Algo especÃ­fico** â€” "Alguma restriÃ§Ã£o ou padrÃ£o que devo saber?"

### 4. Preencher context/project.md

Combinar anÃ¡lise automÃ¡tica + respostas do usuÃ¡rio para gerar:

```markdown
# Contexto do Projeto: {nome}

## Status
- **Fase**: {fase}
- **Ãšltima atualizaÃ§Ã£o**: {data}

## Resumo
{resumo do usuÃ¡rio}

## Stack
- **Linguagem**: {detectada}
- **Framework**: {detectado}
- **Banco de dados**: {se detectado}
- **Infra**: {se detectado}

## Arquitetura
{estrutura detectada}

## RestriÃ§Ãµes e PadrÃµes
{respostas do usuÃ¡rio}

## PrÃ³ximos Passos
- [ ] {baseado na fase}
```

### 5. Inicializar memÃ³ria

Se `memory/lessons-learned.md` ainda estÃ¡ com template padrÃ£o, manter como estÃ¡.
Se nÃ£o existe, criar automaticamente a estrutura (ver Auto-Init em `agent-memory-query`).

### 6. Push da branch (se nova)

Se a branch do `.copilot-project` Ã© nova e ainda nÃ£o tem remote:

```bash
cd .copilot-project
git add .
git commit -m "feat: configuraÃ§Ã£o inicial do projeto"
git push -u origin {branch}
```

### 7. Confirmar configuraÃ§Ã£o

**Output:**
```
âœ… Projeto configurado!

ðŸ“‹ Stack detectada: {stack}
ðŸ“ Contexto: .copilot-project/context/project.md
ðŸ§  MemÃ³ria: .copilot-project/memory/lessons-learned.md

Agora vocÃª pode:
- Pedir para analisar cÃ³digo
- Registrar liÃ§Ãµes aprendidas
- Criar skills especÃ­ficos para o projeto
```

## DiferenÃ§a dos outros mÃ©todos

| MÃ©todo | Onde roda | PropÃ³sito |
|--------|-----------|----------|
| **project-workspace-create** | Workspace core | Cria branch + contexto + gera script |
| **project-setup-bootstrap** | Projeto-alvo (Chat) | Configura contexto apÃ³s submodules existirem |

## Modo Manual

> Para ambientes com restriÃ§Ãµes especiais ou quando se precisa entender o processo em detalhe.

### PrÃ©-requisitos

- Git inicializado no workspace
- Acesso aos repositÃ³rios `.copilot-core` e `.copilot-project`

### Modos de InstalaÃ§Ã£o

O sistema suporta dois modos de instalaÃ§Ã£o:

| Modo | Quando usar | Visibilidade |
|------|-------------|-------------|
| **Aberto** | Submodules podem ser comitados no repo | `.gitmodules` visÃ­vel, clone recursivo funciona |
| **Stealth** | Submodules NÃƒO podem ser expostos | Tudo no `.gitignore`, setup manual por dev |

### Arquitetura

```
{projeto}/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ instructions/
â”‚       â”œâ”€â”€ default.instructions.md      â†’ symlink â†’ ../../.copilot-core/instructions/default.instructions.md
â”‚       â””â”€â”€ workspace.instructions.md    â†’ symlink â†’ ../../.copilot-project/instructions/workspace.instructions.md
â”‚
â”œâ”€â”€ .copilot-core/              # Submodule ou clone (branch main)
â”‚   â”œâ”€â”€ instructions/
â”‚   â”‚   â””â”€â”€ default.instructions.md
â”‚   â”œâ”€â”€ skills/
â”‚   â”‚   â””â”€â”€ {tipo}/
â”‚   â”‚       â””â”€â”€ {skill-name}/
â”‚   â”‚           â””â”€â”€ SKILL.md
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ workspace.instructions.md
â”‚
â””â”€â”€ .copilot-project/           # Submodule ou clone (branch especÃ­fica)
    â”œâ”€â”€ context/
    â”‚   â””â”€â”€ project.md
    â”œâ”€â”€ instructions/
    â”‚   â””â”€â”€ workspace.instructions.md
    â”œâ”€â”€ memory/
    â”‚   â””â”€â”€ lessons-learned.md
    â””â”€â”€ skills/
        â””â”€â”€ {project-skills}/
```

### Passo a passo â€” Modo Aberto (submodule)

#### 1. Adicionar .copilot-core como submodule

```bash
git submodule add -b main https://github.com/pdmartins/.copilot-core.git .copilot-core
```

#### 2. Configurar repositÃ³rio project

```bash
# Se branch jÃ¡ existe:
git submodule add -b {branch} https://github.com/pdmartins/.copilot-project.git .copilot-project

# Se branch nÃ£o existe (novo projeto):
git submodule add https://github.com/pdmartins/.copilot-project.git .copilot-project
cd .copilot-project
git checkout -b {branch}
```

#### 3. Criar symlinks de instructions

**Windows (PowerShell):**

```powershell
mkdir .github\instructions -Force
cmd /c mklink ".github\instructions\default.instructions.md" "..\..\copilot-core\instructions\default.instructions.md"
cmd /c mklink ".github\instructions\workspace.instructions.md" "..\..\copilot-project\instructions\workspace.instructions.md"
```

**Linux/Mac (Bash):**

```bash
mkdir -p .github/instructions
ln -s ../../.copilot-core/instructions/default.instructions.md .github/instructions/default.instructions.md
ln -s ../../.copilot-project/instructions/workspace.instructions.md .github/instructions/workspace.instructions.md
```

#### 4. Clonando em nova mÃ¡quina

```bash
# OpÃ§Ã£o 1: Clone recursivo
git clone --recursive https://github.com/seu/projeto.git

# OpÃ§Ã£o 2: Clone normal + inicializar submodules
git clone https://github.com/seu/projeto.git
cd projeto
git submodule update --init --recursive
```

### Passo a passo â€” Modo Stealth (clone + gitignore)

#### 1. Clonar .copilot-core

```bash
git clone -b main https://github.com/pdmartins/.copilot-core.git .copilot-core
```

#### 2. Clonar .copilot-project

```bash
git clone -b {branch} https://github.com/pdmartins/.copilot-project.git .copilot-project
```

#### 3. Criar symlinks de instructions

(mesmos comandos do modo aberto â€” a estrutura final Ã© idÃªntica)

**Windows (PowerShell):**

```powershell
mkdir .github\instructions -Force
cmd /c mklink ".github\instructions\default.instructions.md" "..\..\copilot-core\instructions\default.instructions.md"
cmd /c mklink ".github\instructions\workspace.instructions.md" "..\..\copilot-project\instructions\workspace.instructions.md"
```

**Linux/Mac (Bash):**

```bash
mkdir -p .github/instructions
ln -s ../../.copilot-core/instructions/default.instructions.md .github/instructions/default.instructions.md
ln -s ../../.copilot-project/instructions/workspace.instructions.md .github/instructions/workspace.instructions.md
```

#### 4. Adicionar ao .gitignore

```bash
cat >> .gitignore << 'EOF'

# Copilot Agent Skills (local only)
.copilot-core/
.copilot-project/
.github/instructions/default.instructions.md
.github/instructions/workspace.instructions.md
EOF
```

#### 5. Onboarding de novo dev

Cada dev precisa rodar os passos 1-3 apÃ³s clonar o projeto. Recomenda-se criar um script `setup-copilot.sh` / `setup-copilot.ps1` no projeto (ou documentar no README interno).

## Troubleshooting

### Submodules/clones nÃ£o existem

Orientar o usuÃ¡rio a usar `project-workspace-create` no workspace core (seÃ§Ã£o PrÃ©-condiÃ§Ã£o acima).

### Erro ao fazer push da branch

```bash
cd .copilot-project
git push -u origin {branch}
```

### Contexto jÃ¡ preenchido

Perguntar ao usuÃ¡rio se deseja sobrescrever ou atualizar.

## ReferÃªncia

- Skill de criaÃ§Ã£o: `project-workspace-create`
- DocumentaÃ§Ã£o: `.copilot-core/QUICK-START.md`
