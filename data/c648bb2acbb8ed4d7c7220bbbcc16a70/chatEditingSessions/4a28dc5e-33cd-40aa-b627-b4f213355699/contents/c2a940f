---
name: agent-memory-update
description: Cria ou atualiza entradas na mem√≥ria do agente (preferences, patterns, decisions, concepts). Grava em arquivos .md dentro das subpastas de memory/, atualizando o index.md. Use ap√≥s decis√µes importantes, descoberta de padr√µes, corre√ß√µes de c√≥digo gerado, quando o usu√°rio pedir para guardar/salvar/anotar/lembrar informa√ß√£o do agente. Triggers: "registrar", "lembrar isso", "guarda isso", "salva isso", "anota isso", "memoriza", "decis√£o importante", "aprendi que", "descobri que", "n√£o √© assim", "muda isso", "corrige isso", "prefiro assim", "faz diferente".
metadata:
  author: copilot-core
  version: "4.0"
  category: agent
  delegable: full
---

# Agent Memory Update

Cria ou atualiza entradas na mem√≥ria persistente do agente. Grava em `.copilot-project/memory/` usando subpastas por categoria.

## Quando Usar

- Ap√≥s decis√£o arquitetural ou t√©cnica importante
- Padr√£o descoberto ou corrigido
- Usu√°rio indica prefer√™ncia de estilo ou abordagem
- **Automaticamente** quando o usu√°rio corrige c√≥digo gerado pelo agente
- **Automaticamente** quando o usu√°rio define regras, estrutura ou processos
- Usu√°rio pede para "lembrar", "registrar", "guardar"

## Quando N√ÉO Usar

- Mudan√ßa trivial (typo, vari√°vel errada) sem padr√£o recorrente
- Corre√ß√£o por mudan√ßa de requisito (n√£o corrigiu padr√£o)
- Informa√ß√£o sobre o PROJETO (usar `project-context-update`)
- Informa√ß√£o j√° documentada em skills ou instructions

## Workflow

### 1. Determinar categoria

| Categoria | Pasta | Quando Usar |
|-----------|-------|-------------|
| Preferences | `preferences/` | Prefer√™ncias de estilo, abordagem, nomenclatura do usu√°rio |
| Patterns | `patterns/` | Padr√£o de c√≥digo aprendido, erro corrigido, conven√ß√£o descoberta |
| Decisions | `decisions/` | Decis√£o arquitetural/t√©cnica/processo com rationale |
| Concepts | `concepts/` | Conhecimento, conceito, defini√ß√£o relevante ao projeto |

### 2. Determinar opera√ß√£o

| Situa√ß√£o | A√ß√£o |
|----------|------|
| Novo item sobre tema in√©dito | Criar novo arquivo `.md` na subpasta |
| Atualiza√ß√£o de item existente | Editar arquivo existente, adicionando bullet |
| Tema j√° tem arquivo | Append ao arquivo existente |

### 3. Formatar entrada

Formato bullet-list por arquivo:

```markdown
# {T√≠tulo descritivo}

- **{YYYY-MM-DD}**: {descri√ß√£o concisa da entrada}
- **{YYYY-MM-DD}**: {outra entrada sobre o mesmo tema}
```

**Naming do arquivo**: `{slug-descritivo}.md` (kebab-case, max 40 chars)
**Exemplos**: `code-style.md`, `naming-conventions.md`, `cqrs-architecture.md`

### 4. Gravar no arquivo

- Criar/editar em `{workspace}/.copilot-project/memory/{categoria}/{arquivo}.md`
- Se a subpasta n√£o existe ‚Üí criar automaticamente

### 5. Atualizar index.md

Atualizar `{workspace}/.copilot-project/memory/index.md`:
- Incrementar contador de entradas da categoria
- Se nova entrada de alta prioridade ‚Üí adicionar em "Consulta R√°pida"

### 6. Confirmar

```
üìù **Mem√≥ria atualizada**
- Categoria: {categoria}
- Arquivo: memory/{categoria}/{arquivo}.md
- Resumo: {descri√ß√£o curta}
```

## Auto-Init

Se `memory/index.md` n√£o existe:

1. Criar `memory/index.md` com template padr√£o (ver template em `.copilot-project-worktrees/main/`)
2. Criar subpastas com `.gitkeep`: `preferences/`, `patterns/`, `decisions/`, `concepts/`
3. Prosseguir com a opera√ß√£o
