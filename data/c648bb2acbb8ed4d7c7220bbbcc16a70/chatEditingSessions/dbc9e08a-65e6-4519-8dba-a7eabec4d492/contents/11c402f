---
name: skill-output-validate
description: Valida a estrutura e qualidade dos artefatos de metadata do sistema ‚Äî SKILL.md, instructions, cat√°logos, context, memory, code-map. Verifica frontmatter schema, naming conventions, consist√™ncia entre artefatos, e formato correto. Use ap√≥s criar/editar skills, instructions, ou artefatos de metadata. Triggers: "valida skills", "verifica estrutura", "valida instructions", "verifica consist√™ncia", ap√≥s skill-template-create.
metadata:
  author: copilot-core
  version: "2.0"
  category: skill
  delegable: full
---

# Skill Output Validate

Valida estrutura e qualidade dos artefatos de metadata do sistema de skills.

## Quando Usar

- Ap√≥s `skill-template-create` criar um novo skill
- Ap√≥s edi√ß√µes manuais em SKILL.md, instructions, cat√°logos
- Sob demanda com "valida skills", "verifica estrutura"
- Como parte de uma review completa (chamado por `agent-action-review`)
- Antes de commit/push de mudan√ßas no `.copilot-core` ou `.copilot-project`

## Quando N√ÉO Usar

- Valida√ß√£o de c√≥digo-fonte (usar `code-review-analyze`)
- Valida√ß√£o de completude de side-effects (usar `agent-action-review`)
- Valida√ß√£o de API patterns (usar `code-api-validate`)

## Workflow

### 1. Determinar escopo

Aceitar um dos seguintes como input:

| Input | Escopo |
|-------|--------|
| Nome de skill espec√≠fico | Validar apenas esse SKILL.md + presen√ßa nos cat√°logos/instructions |
| Tipo de artefato (`skills`, `instructions`, `catalogs`, `context`, `memory`, `codemap`) | Validar todos artefatos desse tipo |
| `all` | Validar tudo |
| Nenhum | Default: validar skills alterados na sess√£o atual |

### 2. Validar SKILL.md

Para cada SKILL.md no escopo:

#### Frontmatter Schema

| Campo | Regra | Severidade |
|-------|-------|------------|
| `name` | Presente, formato `{tipo}-{feature}-{a√ß√£o}`, 3 segmentos, kebab-case | üî¥ |
| `description` | Presente, inclui triggers, >20 chars | ‚ö†Ô∏è |
| `metadata.author` | Presente | ‚ö†Ô∏è |
| `metadata.version` | Presente, formato semver | ‚ö†Ô∏è |
| `metadata.category` | Presente, igual ao primeiro segmento de `name` | üî¥ |
| `metadata.delegable` | Presente, valor em `full\|orchestrated\|none` | ‚ö†Ô∏è |

#### Naming Convention

| Regra | Exemplo v√°lido | Exemplo inv√°lido |
|-------|---------------|-----------------|
| Exatamente 3 segmentos separados por `-` | `agent-chat-save` | `agent-save`, `agent-chat-save-v2` |
| Primeiro segmento = tipo v√°lido | `agent`, `code`, `infra`, `project`, `skill`, `editor` | `tool`, `misc` |
| kebab-case | `agent-chat-save` | `agent-Chat-Save`, `agent_chat_save` |

#### Se√ß√µes Obrigat√≥rias

| Se√ß√£o | Obrigat√≥ria para |
|-------|-----------------|
| `## Quando Usar` | Todos |
| `## Workflow` | Todos |
| `## Config Loading` | Skills dos tipos `infra` e `code` |

#### Tamanho e Complexidade

| Regra | Limite |
|-------|--------|
| SKILL.md < 150 linhas | Se maior, considerar split em skills menores |
| M√°ximo 7 steps no workflow | Se maior, skill tem responsabilidades demais |
| Linguagem imperativa | Sem texto narrativo longo ‚Äî steps diretos e claros |
| Tabelas para decis√£o | Usar tabelas em vez de par√°grafos para l√≥gica condicional |

### 3. Validar Instructions

Verificar consist√™ncia entre os 3 arquivos de instructions:

| Arquivo | Path |
|---------|------|
| Core | `.copilot-core/instructions/agent-skills-core.instructions.md` |
| Template | `.copilot-core/templates/workspace.instructions.md` |
| Project | `.copilot-project/instructions/agent-skills-project.instructions.md` |

#### Capability Manifest

| Verifica√ß√£o | Como |
|-------------|------|
| Contagem por tipo correta? | Contar skills f√≠sicos em `.copilot-core/skills/{tipo}/` vs Qtd no Manifest |
| Cat√°logos "N skills" | Contar skills no SKILL.md do cat√°logo vs N declarado |
| "full (N)" / "orchestrated (N)" / "none (N)" | Contar skills classificados vs N declarado (em `agent-subagent-delegate`) |

#### Consist√™ncia entre Manifests

| Verifica√ß√£o | Como |
|-------------|------|
| Contagens id√™nticas? | Cross-check core vs template vs project |
| Always-Known consistente? | Lista de ~10 skills id√™ntica nos 3 arquivos |
| Skill existe fisicamente? | Verificar se `{tipo}/{name}/SKILL.md` existe em `.copilot-core/skills/` |

### 4. Validar Cat√°logos

Para cada `{tipo}-catalog-query/SKILL.md`:

| Verifica√ß√£o | Como |
|-------------|------|
| Todos os skills do tipo listados? | Listar skills em `.copilot-core/skills/{tipo}/` vs tabela do cat√°logo |
| Roteamento r√°pido cobre cen√°rios? | Verificar se situa√ß√µes comuns t√™m routing |
| Description inclui keywords? | Campo description no frontmatter menciona keywords de todos os skills indexados |

### 5. Validar Context (`project.md`)

| Verifica√ß√£o | Como |
|-------------|------|
| Arquivo existe? | Check `.copilot-project/context/project.md` |
| Se√ß√µes obrigat√≥rias presentes? | Objetivo, Stack, Estado Atual |
| "√öltima Atualiza√ß√£o" recente? | Data vs data atual |

### 6. Validar Memory (`lessons-learned.md`)

| Verifica√ß√£o | Como |
|-------------|------|
| Formato XML correto? | Cada `<lesson>` tem `date`, `category`, `<context>`, `<decision>`, `<outcome>` |
| Categorias v√°lidas? | Uma das: `arquitetura`, `padr√µes`, `tooling`, `workflow`, `debug`, `performance`, `seguran√ßa`, `regras`, `estrutura` |
| Sem duplicatas? | Verificar li√ß√µes com context/decision similares |
| `supersedes` referencia li√ß√£o existente? | Se presente, verificar que a li√ß√£o referenciada existe |

### 7. Validar Code-Map

| Verifica√ß√£o | Como |
|-------------|------|
| `index.md` existe? | Check `.copilot-project/context/code-map/index.md` |
| Artefatos correspondem a arquivos reais? | Cross-check paths listados vs filesystem |
| Tipagem consistente? | service, model, api, component, util, config |

### 8. Gerar Relat√≥rio

```
üìã **Valida√ß√£o de Artefatos**

### SKILL.md
‚úÖ `agent-chat-save` ‚Äî frontmatter v√°lido, naming OK, se√ß√µes completas
‚ö†Ô∏è `infra-docker-build` ‚Äî falta se√ß√£o "Config Loading" (obrigat√≥ria para tipo infra)
üî¥ `code-novo-skill` ‚Äî category "code" mas name come√ßa com "code" incorretamente ‚Üí 2 segmentos apenas

### Instructions
‚úÖ Capability Manifest: contagens corretas (agent=10, code=22, project=10, infra=12, skill=2, editor=2)
‚ö†Ô∏è Template workspace.instructions.md Manifest diverge do core (code diz 21, deveria ser 22)
üî¥ `agent-impact-validate` n√£o listado no cat√°logo agent-catalog-query

### Cat√°logos
‚úÖ `code-catalog-query` ‚Äî 21 skills listados, todos existem
‚ö†Ô∏è `agent-catalog-query` ‚Äî description n√£o menciona keyword "review"

### Memory
‚úÖ 8 li√ß√µes ‚Äî formato XML v√°lido, categorias v√°lidas
‚ö†Ô∏è Poss√≠vel duplicata: li√ß√£o 2026-02-15 "naming" e li√ß√£o 2026-02-15 "chat naming"

**A√ß√µes necess√°rias**: {lista priorizada}
```

### Severidades

| N√≠vel | Significado | Exemplo |
|-------|-------------|---------|
| ‚úÖ | V√°lido | Frontmatter completo e correto |
| ‚ö†Ô∏è | Aten√ß√£o ‚Äî funciona mas n√£o ideal | Description sem triggers, contagem desatualizada |
| üî¥ | Inv√°lido ‚Äî precisa de corre√ß√£o | Naming convention violada, skill n√£o listado |

## Checklist R√°pida

- [ ] Frontmatter: name, description, metadata.author, metadata.version, metadata.category, metadata.delegable
- [ ] Naming: 3 segmentos, kebab-case, tipo v√°lido, category = tipo
- [ ] Se√ß√µes: Quando Usar, Workflow, Config Loading (se infra/code)
- [ ] Tamanho: < 150 linhas, ‚â§ 7 steps, linguagem imperativa
- [ ] Instructions: Capability Manifest contagens corretas nos 3 arquivos
- [ ] Instructions: Manifests id√™nticos entre core, template e project
- [ ] Cat√°logo: skill listado no cat√°logo do seu tipo
- [ ] agent-subagent-delegate: skill listado com classifica√ß√£o correta
- [ ] MCP config: `.vscode/mcp.json` v√°lido (se existir)
- [ ] Memory: formato XML, categorias v√°lidas, sem duplicatas
- [ ] Code-map: artefatos correspondem a arquivos existentes
- [ ] Context Database: skill sincronizado com MCP via `agent-memory-sync`
