{"version":2,"initialFileContents":[["file:///d%3A/Repos/_av/Sky/Sky.HubAI/docs/api/environments/%F0%9F%A7%AAPRD%20-%20Pedro.bru","62e6dc4"],["file:///d%3A/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs","0f89c04"]],"timeline":{"checkpoints":[{"checkpointId":"cec2b778-ada6-4161-a3c2-46f281110244","epoch":0,"label":"Initial State","description":"Starting point before any edits"},{"checkpointId":"9e598b36-32a6-4bab-9e12-37875d93bbf8","requestId":"request_1843ce61-9838-41c8-a05d-2d7e8c9af3b4","epoch":1,"label":"Request request_1843ce61-9838-41c8-a05d-2d7e8c9af3b4"},{"checkpointId":"cc7788f9-bd72-4f05-8bb6-96d58fd1d291","requestId":"request_3319c79d-7894-4a23-850d-0d8ee7a2b378","epoch":2,"label":"Request request_3319c79d-7894-4a23-850d-0d8ee7a2b378"},{"checkpointId":"80282d09-705f-4bfa-ae7c-ed6f61fe941d","requestId":"request_3319c79d-7894-4a23-850d-0d8ee7a2b378","undoStopId":"ae4bee8b-5687-419c-a031-ce547c3a19aa","epoch":3,"label":"Request request_3319c79d-7894-4a23-850d-0d8ee7a2b378 - Stop ae4bee8b-5687-419c-a031-ce547c3a19aa"},{"checkpointId":"b769ea68-c1e9-4b98-b723-bca1b8bd232e","requestId":"request_aecaf9d4-1847-456c-b701-aa5c5279be29","epoch":6,"label":"Request request_aecaf9d4-1847-456c-b701-aa5c5279be29"},{"checkpointId":"e5fc900f-1ff8-4010-8387-a35248155360","requestId":"request_aecaf9d4-1847-456c-b701-aa5c5279be29","undoStopId":"fcd308d6-30cc-4614-892d-eacfe3535a55","epoch":7,"label":"Request request_aecaf9d4-1847-456c-b701-aa5c5279be29 - Stop fcd308d6-30cc-4614-892d-eacfe3535a55"}],"currentEpoch":10,"fileBaselines":[["file:///d%3A/Repos/_av/Sky/Sky.HubAI/docs/api/environments/%F0%9F%A7%AAPRD%20-%20Pedro.bru::request_3319c79d-7894-4a23-850d-0d8ee7a2b378",{"uri":{"$mid":1,"fsPath":"d:\\Repos\\_av\\Sky\\Sky.HubAI\\docs\\api\\environments\\ðŸ§ªPRD - Pedro.bru","_sep":1,"external":"file:///d%3A/Repos/_av/Sky/Sky.HubAI/docs/api/environments/%F0%9F%A7%AAPRD%20-%20Pedro.bru","path":"/d:/Repos/_av/Sky/Sky.HubAI/docs/api/environments/ðŸ§ªPRD - Pedro.bru","scheme":"file"},"requestId":"request_3319c79d-7894-4a23-850d-0d8ee7a2b378","content":"vars {\n  baseUrl: sk-sky-hubai-fkebg6egbebrexd0.brazilsouth-01.azurewebsites.net\n}\nvars:secret [\n  ClientToken\n]\n","epoch":4,"telemetryInfo":{}}],["file:///d%3A/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs::request_aecaf9d4-1847-456c-b701-aa5c5279be29",{"uri":{"$mid":1,"fsPath":"d:\\Repos\\_av\\Sky\\Sky.HubAI\\src\\Api\\DependencyInjection\\PresentationApplicationBuilderExtensions.cs","_sep":1,"external":"file:///d%3A/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs","path":"/d:/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs","scheme":"file"},"requestId":"request_aecaf9d4-1847-456c-b701-aa5c5279be29","content":"using Microsoft.AspNetCore.Builder;\r\nusing Microsoft.Extensions.Hosting;\r\nusing Sky.HubAI.Api.Middleware;\r\nusing Microsoft.AspNetCore.HttpOverrides;\r\n\r\nnamespace Sky.HubAI.Api.DependencyInjection\r\n{\r\n    public static class PresentationApplicationBuilderExtensions\r\n    {\r\n        public static WebApplication UsePresentation(this WebApplication app)\r\n        {\r\n            ConfigureSwagger(app);\r\n            ConfigureHttpPipeline(app);\r\n\r\n            return app;\r\n        }\r\n\r\n        private static void ConfigureSwagger(WebApplication app)\r\n        {\r\n            if (app.Environment.IsDevelopment())\r\n            {\r\n                app.UseSwagger();\r\n                app.UseSwaggerUI();\r\n            }\r\n        }\r\n\r\n        private static void ConfigureHttpPipeline(WebApplication app)\r\n        {\r\n            // Correlation ID should be first to ensure it's available for all subsequent middleware\r\n            app.UseMiddleware<CorrelationIdMiddleware>();\r\n\r\n            app.UseExceptionHandler();\r\n\r\n            // Honor X-Forwarded-* headers when behind reverse proxies/load balancers\r\n            app.UseForwardedHeaders(new ForwardedHeadersOptions\r\n            {\r\n                ForwardedHeaders = ForwardedHeaders.XForwardedFor | ForwardedHeaders.XForwardedProto\r\n            });\r\n\r\n            // Only enforce HTTPS redirection outside Development to avoid preflight/localhost issues\r\n            if (!app.Environment.IsDevelopment())\r\n            {\r\n                app.UseHttpsRedirection();\r\n            }\r\n\r\n            // Enable endpoint routing prior to applying CORS so that policies are evaluated correctly\r\n            app.UseRouting();\r\n\r\n            app.UseCors(PresentationConstants.DefaultCorsPolicyName);\r\n\r\n            app.UseMiddleware<ClientTokenAuthMiddleware>();\r\n            app.UseMiddleware<HttpLoggingMiddleware>();\r\n\r\n            app.UseAuthorization();\r\n\r\n            app.MapControllers();\r\n        }\r\n    }\r\n}","epoch":8,"telemetryInfo":{}}]],"operations":[{"type":"textEdit","uri":{"$mid":1,"fsPath":"d:\\Repos\\_av\\Sky\\Sky.HubAI\\docs\\api\\environments\\ðŸ§ªPRD - Pedro.bru","_sep":1,"external":"file:///d%3A/Repos/_av/Sky/Sky.HubAI/docs/api/environments/%F0%9F%A7%AAPRD%20-%20Pedro.bru","path":"/d:/Repos/_av/Sky/Sky.HubAI/docs/api/environments/ðŸ§ªPRD - Pedro.bru","scheme":"file"},"requestId":"request_3319c79d-7894-4a23-850d-0d8ee7a2b378","epoch":5,"edits":[{"text":"https://","range":{"startLineNumber":2,"startColumn":12,"endLineNumber":2,"endColumn":12}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"d:\\Repos\\_av\\Sky\\Sky.HubAI\\src\\Api\\DependencyInjection\\PresentationApplicationBuilderExtensions.cs","_sep":1,"external":"file:///d%3A/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs","path":"/d:/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs","scheme":"file"},"requestId":"request_aecaf9d4-1847-456c-b701-aa5c5279be29","epoch":9,"edits":[{"text":"Enforce HTTPS redirection and HSTS outside Development\r\n            if (!app.Environment.IsDevelopment())\r\n            {\r\n                app.UseHsts();","range":{"startLineNumber":40,"startColumn":16,"endLineNumber":42,"endColumn":14}}]}],"epochCounter":10},"recentSnapshot":{"entries":[{"resource":"file:///d%3A/Repos/_av/Sky/Sky.HubAI/docs/api/environments/%F0%9F%A7%AAPRD%20-%20Pedro.bru","languageId":"plaintext","originalHash":"74fba9b","currentHash":"74fba9b","state":1,"snapshotUri":"chat-editing-snapshot-text-model:/d%3A/Repos/_av/Sky/Sky.HubAI/docs/api/environments/%F0%9F%A7%AAPRD%20-%20Pedro.bru?%7B%22session%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22vscode-chat-session%3A%2F%2Flocal%2FNWQ1M2NmZWUtMGUzZC00MWVmLTlmYWUtMjE5YWVjZTVlMTQy%22%2C%22path%22%3A%22%2FNWQ1M2NmZWUtMGUzZC00MWVmLTlmYWUtMjE5YWVjZTVlMTQy%22%2C%22scheme%22%3A%22vscode-chat-session%22%2C%22authority%22%3A%22local%22%7D%2C%22requestId%22%3A%22%22%2C%22undoStop%22%3A%22%22%7D","telemetryInfo":{"requestId":"request_3319c79d-7894-4a23-850d-0d8ee7a2b378","agentId":"github.copilot.editsAgent","modelId":"copilot/claude-opus-4.5","modeId":"agent"}},{"resource":"file:///d%3A/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs","languageId":"csharp","originalHash":"40d45e0","currentHash":"40d45e0","state":1,"snapshotUri":"chat-editing-snapshot-text-model:/d%3A/Repos/_av/Sky/Sky.HubAI/src/Api/DependencyInjection/PresentationApplicationBuilderExtensions.cs?%7B%22session%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22vscode-chat-session%3A%2F%2Flocal%2FNWQ1M2NmZWUtMGUzZC00MWVmLTlmYWUtMjE5YWVjZTVlMTQy%22%2C%22path%22%3A%22%2FNWQ1M2NmZWUtMGUzZC00MWVmLTlmYWUtMjE5YWVjZTVlMTQy%22%2C%22scheme%22%3A%22vscode-chat-session%22%2C%22authority%22%3A%22local%22%7D%2C%22requestId%22%3A%22%22%2C%22undoStop%22%3A%22%22%7D","telemetryInfo":{"requestId":"request_aecaf9d4-1847-456c-b701-aa5c5279be29","agentId":"github.copilot.editsAgent","modelId":"copilot/claude-opus-4.5","modeId":"agent"}}]}}