---
applyTo: '**'
---

# Workspace Context Instructions — STT (Speech-To-Text)

Este workspace usa o sistema de instruções do Copilot Agent com o padrão [Agent Skills](https://agentskills.io).

## Workspace Structure

| Repo | Caminho | Propósito |
|------|---------|-----------|
| **Core** | `.github/.copilot-core/` | Skills genéricos reutilizáveis |
| **Project** | `.github/.copilot-project/` | Skills e dados específicos do projeto |
| **Angular Frontend** | `Sigah.SamWeb.Web/` | UI para médicos (Angular 5) |
| **Django BFF** | `Sigah.SamWeb.Api/` | Proxy/orquestrador (Python 3.6, Django 1.11) |
| **Java Core API** | `Pep.SamWeb.Api/` | Lógica de negócio + Oracle (Java 8, WildFly 9) |
| **STT API** | `VoiceTranscription.Api/` | REST API para transcrição (.NET 8) |
| **STT Consumer** | `VoiceTranscription.Consumer/` | Worker Service Pub/Sub (.NET 8) |
| **WildFly** | `wildfly_PEPSAM/` | Distribuição WildFly para container Java |

## Arquitetura do Sistema

```
STT/
├── .github/
│   ├── instructions/
│   │   ├── workspace.instructions.md   # Este arquivo
│   │   └── default.instructions.md     # Regras do agente
│   ├── .copilot-core/                  # Clone - Core compartilhado
│   │   ├── instructions/
│   │   │   └── default.instructions.md
│   │   ├── skills/
│   │   │   └── {skill-name}/
│   │   │       └── SKILL.md
│   │   └── templates/
│   │       └── workspace.instructions.md
│   │
│   └── .copilot-project/              # Clone (branch _hv/STT)
│       ├── context/
│       │   ├── project.md              # Estado atual do projeto
│       │   └── code-map/               # Mapa de código estruturado
│       ├── memory/
│       │   └── lessons-learned.md      # Lições aprendidas
│       └── skills/
│           └── {skill-name}/
│               └── SKILL.md
│
├── Sigah.SamWeb.Web/                   # Angular 5 Frontend
├── Sigah.SamWeb.Api/                   # Django 1.11 BFF
├── Pep.SamWeb.Api/                     # Java 8 / WildFly Core API
├── VoiceTranscription.Api/             # .NET 8 STT REST API
├── VoiceTranscription.Consumer/        # .NET 8 STT Worker Service
├── wildfly_PEPSAM/                     # WildFly 9 distribution
└── docker-compose.yml                  # Orquestração (4 serviços AutoCid)
```

## Padrão Agent Skills

Cada skill segue o formato:

```
{contexto}-{funcionalidade}/
└── SKILL.md
```

### SKILL.md Structure

```markdown
---
name: {contexto}-{funcionalidade}
description: {descrição completa + triggers}
metadata:
  author: {autor}
  version: "1.0"
  category: {categoria}
---

# {Nome do Skill}

{conteúdo em Markdown}
```

## Skills Core Disponíveis

| Categoria | Skill | Propósito |
|-----------|-------|-----------|
| Agent | `agent-memory-query` | Consultar lições aprendidas |
| Agent | `agent-memory-register` | Registrar novas lições |
| Agent | `agent-memory-init` | Inicializar estrutura de memória |
| Agent | `agent-todo` | Gerenciar tarefas complexas |
| Code Map | `code-map-query` | Consultar mapa de código existente |
| Code Map | `code-map-update` | Registrar/atualizar artefatos de código |
| Code Map | `code-map-init` | Inicializar estrutura do mapa de código |
| Project | `project-context-query` | Consultar contexto do projeto |
| Project | `project-context-update` | Atualizar contexto |
| Project | `project-context-init` | Inicializar contexto |
| Project | `project-analyze` | Analisar projeto e sugerir skills |
| Project | `project-create` | Criar projeto do workspace core |
| Project | `project-bootstrap` | Configurar projeto já plugado |
| Project | `project-init` | Guia manual de inicialização |
| Project | `project-update` | Atualizar repos |
| Project | `project-switch-branch` | Trocar branch do project |
| Skill | `skill-create` | Criar novos skills |
| Editor | `editor-markdown` | Regras de markdown |

## Fluxo de Carregamento

1. Agente escaneia `skills/` e lê frontmatter de cada `SKILL.md`
2. Mantém índice com `name` e `description` de todas as skills
3. Ao receber tarefa, compara com descriptions para decidir qual ativar
4. Carrega body completo do `SKILL.md` quando skill é ativada
5. Carrega `references/`, `scripts/`, `assets/` sob demanda

## Estratégia de Branches

### `.copilot-core`
| Branch | Propósito | Conteúdo |
|--------|-----------|----------|
| `main` | Desenvolvimento do core | Tudo (`.github/`, workflows, docs, workspace file) |
| `core` | **Distribuição para projetos** | Apenas `instructions/`, `skills/`, `templates/` |

- **Este projeto usa a branch `core`** (clone em `.github/.copilot-core/`)
- Para atualizar: `cd .github/.copilot-core && git pull origin core`

### `.copilot-project`
| Branch | Propósito |
|--------|-----------|
| `main` | Template base (agnóstico) |
| `_hv/STT` | **Este projeto** |

- Para atualizar: `cd .github/.copilot-project && git pull`

## Regras deste Workspace

1. **Core é genérico**: Nunca referenciar skills específicos de projeto
2. **Project estende Core**: Adiciona skills, nunca substitui
3. **Responsabilidade única**: Cada skill faz UMA coisa
4. **Nomenclatura padronizada**: `{contexto}-{funcionalidade}`

## Referência Rápida

| Quando você disser... | Eu entendo como... |
|----------------------|-------------------|
| "no Core" | `.github/.copilot-core/` |
| "no Project" | `.github/.copilot-project/` |
| "Core Skill" | `.github/.copilot-core/skills/{name}/SKILL.md` |
| "Project Skill" | `.github/.copilot-project/skills/{name}/SKILL.md` |
| "criar skill" | Usar `skill-create` |
| "analisar projeto" | Usar `project-analyze` |
| "API STT" | `VoiceTranscription.Api/` |
| "Consumer" | `VoiceTranscription.Consumer/` |
| "Java", "PEPSAM" | `Pep.SamWeb.Api/` |
| "Django", "BFF", "Python" | `Sigah.SamWeb.Api/` |
| "Angular", "Frontend", "Web" | `Sigah.SamWeb.Web/` |
| "CID IA", "AutoCid" | Fluxo CidPrediction (Java → .NET CidPrediction) |
| "transcrição", "STT" | Fluxo VoiceTranscription (API + Consumer + Pub/Sub) |
